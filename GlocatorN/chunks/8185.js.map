{"version":3,"file":"chunks/8185.js","mappings":"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","sources":["webpack://momraGisCore/./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/layers/GroupLayerView.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/2d/layers/GroupLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport\"../../../webgl/BufferObject.js\";import e from\"../../../webgl/FramebufferObject.js\";import\"../../../../core/has.js\";import\"../../../webgl/checkWebGLError.js\";import\"../../../webgl/enums.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/Texture.js\";import\"../../../webgl/VertexArrayObject.js\";import t from\"./WGLContainer.js\";class r extends t{constructor(){super(...arguments),this._lastWidth=0,this._lastHeight=0,this.requiresDedicatedFBO=!1}dispose(){this._renderTarget&&(this._renderTarget.dispose(),this._renderTarget=null)}doRender(e){const t=this.createRenderParams(e),{context:r,painter:s,profiler:i}=t;this._prevFBO=r.getBoundFramebufferObject(),i.recordContainerStart(this.name);const o=this._getFbo(t),a=s.getRenderTarget();r.bindFramebuffer(o),s.setRenderTarget(o),r.setDepthWriteEnabled(!0),r.setColorMask(!0,!0,!0,!0),r.setClearColor(0,0,0,0),r.setClearDepth(1),r.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.setDepthWriteEnabled(!1);for(const n of this.children)n.beforeRender(e);for(const n of this.children)n.processRender(t);for(const n of this.children)n.afterRender(e);s.setRenderTarget(a),r.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(t,this._clippingInfos?255:0,this.computedOpacity),r.setStencilTestEnabled(!1),r.setStencilWriteMask(0),s.blitTexture(r,o.colorTexture,9728),s.compositeLayer(t,this.computedOpacity),i.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(t){const{context:r,painter:s}=t,{width:i,height:o}=r.getViewport();if(i!==this._lastWidth||o!==this._lastHeight)if(this._lastWidth=i,this._lastHeight=o,this._renderTarget)this._renderTarget.resize(i,o);else{const t={target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,wrapMode:33071,width:i,height:o},a={colorTarget:0,depthStencilTarget:3};this._renderTarget=new e(r,a,t,s.getSharedStencilBuffer())}return this._renderTarget}}export{r as GroupContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import i from\"../../core/Collection.js\";import{castForReferenceSetter as s,referenceSetter as r}from\"../../core/collectionUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"./LayerView.js\";let o=class extends l{constructor(e){super(e),this.type=\"group\",this.layerViews=new i}initialize(){this.handles.add([this.layerViews.on(\"change\",(e=>this._layerViewsChangeHandler(e))),this.layerViews.on(\"after-changes\",(()=>this._layerViewsAfterChangesHandler())),this.layer.watch(\"visibilityMode\",(()=>this._visibilityModeHandler()),!0),this.watch(\"visible\",(()=>this._visibleHandler()),!0)],\"grouplayerview\"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]}),this._layerViewsAfterChangesHandler()}set layerViews(e){this._set(\"layerViews\",r(e,this._get(\"layerViews\")))}isUpdating(){return this.layerViews.some((e=>e.updating))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce(((e,i)=>e+i.updatingProgress),0)/this.layerViews.length}_hasLayerViewVisibleOverrides(){return this.layerViews.some((e=>e._isOverridden(\"visible\")))}_findLayerViewForLayer(e){return e&&this.layerViews.find((i=>i.layer===e))}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find((e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible}));return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach((i=>{i.visible=i===e})))}_layerViewsChangeHandler(e){this.handles.remove(\"grouplayerview:visible\"),this.handles.add(this.layerViews.map((e=>e.watch(\"visible\",(i=>this._layerViewVisibleHandler(i,e)),!0))).toArray(),\"grouplayerview:visible\");const i=e.added[e.added.length-1];let s=null;i&&i.visible&&(s=i),this._enforceVisibility(s)}_layerViewsAfterChangesHandler(){this.handles.remove(\"grouplayerview:updating\"),this.handles.add(this.layerViews.map((e=>e.watch(\"updating\",(()=>this._updateUpdating()),!0))).toArray(),\"grouplayerview:updating\"),this._updateUpdating()}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":{const e=this.visible;this.layerViews.forEach((i=>{i.visible=e}));break}case\"exclusive\":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case\"inherited\":e!==this.visible&&(i.visible=this.visible);break;case\"exclusive\":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&\"inherited\"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}_updateUpdating(){this.notifyChange(\"updating\")}};e([t({cast:s})],o.prototype,\"layerViews\",null),e([t()],o.prototype,\"view\",void 0),e([t({readOnly:!0})],o.prototype,\"updatingProgress\",null),o=e([a(\"esri.views.layers.GroupLayerView\")],o);const h=o;export{h as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GroupContainer as s}from\"../engine/webgl/GroupContainer.js\";import{LayerView2DMixin as t}from\"./LayerView2D.js\";import o from\"../../layers/GroupLayerView.js\";let a=class extends(t(o)){constructor(){super(...arguments),this.container=new s}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on(\"after-changes\",(()=>this._updateStageChildren())),\"grouplayerview2d\")}detach(){this.handles.remove(\"grouplayerview2d\"),this.container.removeAllChildren()}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach(((e,r)=>this.container.addChildAt(e.container,r)))}};a=e([r(\"esri.views.2d.layers.GroupLayerView2D\")],a);const i=a;export{i as default};\n"],"names":["r","constructor","super","arguments","this","_lastWidth","_lastHeight","requiresDedicatedFBO","dispose","_renderTarget","doRender","e","t","createRenderParams","context","painter","s","profiler","i","_prevFBO","getBoundFramebufferObject","recordContainerStart","name","o","_getFbo","a","getRenderTarget","bindFramebuffer","setRenderTarget","setDepthWriteEnabled","setColorMask","setClearColor","setClearDepth","clear","gl","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","n","children","beforeRender","processRender","afterRender","beforeRenderLayer","_clippingInfos","computedOpacity","setStencilTestEnabled","setStencilWriteMask","blitTexture","colorTexture","compositeLayer","recordContainerEnd","blendMode","effects","computedEffects","globalOpacity","width","height","getViewport","resize","target","pixelFormat","dataType","samplingMode","wrapMode","colorTarget","depthStencilTarget","getSharedStencilBuffer","type","layerViews","initialize","handles","add","on","_layerViewsChangeHandler","_layerViewsAfterChangesHandler","layer","watch","_visibilityModeHandler","_visibleHandler","added","toArray","removed","moved","_set","_get","isUpdating","some","updating","updatingProgress","length","reduce","_hasLayerViewVisibleOverrides","_isOverridden","_findLayerViewForLayer","find","_firstVisibleOnLayerOrder","layers","visible","_enforceExclusiveVisibility","getItemAt","forEach","remove","map","_layerViewVisibleHandler","_enforceVisibility","_updateUpdating","visibilityMode","notifyChange","cast","prototype","readOnly","h","container","attach","_updateStageChildren","detach","removeAllChildren","update","moveStart","viewChange","moveEnd","addChildAt"],"sourceRoot":""}