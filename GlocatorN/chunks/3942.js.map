{"version":3,"file":"chunks/3942.js","mappings":"8KAIuuBA,EAAYC,E,8IAAAA,EAA0CD,IAAIA,EAAE,KAA3CE,OAAO,SAASD,EAAEE,QAAQ,UAAsB,MAAMC,EAAE,CAACH,EAAEI,EAAEC,KAAK,GAAGL,GAAGA,EAAEM,WAAW,CAAC,IAAIC,EAAE,GAAGF,EAAE,CAAC,MAAMD,EAAEI,KAAKC,IAAIJ,EAAEK,MAAMC,KAAKN,EAAEK,MAAME,KAAKP,EAAEK,MAAMG,KAAKR,EAAEK,MAAMI,MAAMP,EAAEP,EAAEM,YAAW,QAAEF,QAAQG,EAAEP,EAAEM,WAAWF,EAAEW,cAAc,OAAOR,EAAE,OAAOP,GAAGA,EAAEgB,YAAYhB,EAAEgB,YAAY,GAAGC,EAAE,CAACC,KAAK,CAACC,OAAO,CAACT,MAAM,CAACC,KAAK,GAAGC,KAAK,EAAEC,KAAK,GAAGC,KAAK,GAAGM,SAAS,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,OAAOC,YAAY,CAACD,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,CAAC,GAAG,IAAI,CAAC,EAAE,QAAQE,QAAQ,CAACb,MAAM,CAACC,KAAK,IAAIC,KAAK,EAAEC,KAAK,IAAIC,KAAK,GAAGM,SAAS,CAACC,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,QAAQC,YAAY,CAACD,MAAM,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,KAAK,CAAC,EAAE,UAAUG,OAAO,CAACL,OAAO,CAACT,MAAM,CAACC,KAAK,GAAGC,KAAK,EAAEC,KAAK,EAAEC,MAAM,GAAGM,SAAS,CAACK,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,MAAMH,YAAY,CAACG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,OAAOF,QAAQ,CAACb,MAAM,CAACC,KAAK,IAAIC,KAAK,EAAEC,KAAK,EAAEC,MAAM,GAAGM,SAAS,CAACK,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,MAAMH,YAAY,CAACG,MAAM,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,SAAS,MAAMC,EAAEC,YAAY3B,EAAEI,GAAGwB,KAAKC,kBAAkB7B,EAAE4B,KAAKE,UAAU1B,EAAEwB,KAAKG,eAAe,IAAIC,IAAIJ,KAAKK,oBAAoB,IAAID,IAAIJ,KAAKM,gBAAgB,IAAI,IAAEN,KAAKO,oBAAoB,IAAI,IAAEP,KAAKQ,YAAY,IAAI,IAAER,KAAKO,qBAAqBE,8BAA8BrC,EAAEI,EAAEC,EAAEiC,EAAE/B,EAAEgC,EAAEC,EAAEC,GAAGH,EAAEA,IAAIlC,EAAE,MAAMA,EAAEsC,SAAS,uBAAsB,QAAEtC,EAAEgB,UAAU,OAA8wQ,SAAWpB,GAAG,KAAKA,GAAGA,EAAE2C,MAAM3C,EAAE2C,KAAKC,QAAQ,OAAO,KAAK,OAAO5C,EAAE2C,KAAKC,OAAOC,MAAM,IAAI,iBAAiB,IAAI,gBAAgB,MAAM,oBAAoB,IAAI,gBAAgB,MAAM,uBAAuB,IAAI,mBAAmB,MAAM,sBAAsB,QAAQ,OAAO,MAAjhRC,CAAE9C,GAAG,MAAM+C,QAAQnB,KAAKoB,iBAAiBhD,EAAEI,EAA8kQ,SAAWJ,GAAG,OAAOA,EAAEiD,OAAOC,KAAKlD,GAAG,IAAImD,KAAK/C,IAAG,CAAEgD,KAAKhD,EAAEiD,MAAMjD,EAAEyC,KAAK,iBAAiB7C,EAAEI,GAAG,sBAAsB,0BAAhsQkD,CAAElD,EAAEmD,YAAY,KAAKlD,EAAEiC,EAAEG,GAAG,OAAOb,KAAK4B,mBAAmBT,EAAE3C,EAAEkC,EAAE/B,EAAEgC,EAAEC,GAAGH,uBAAuBrC,EAAEI,EAAEkC,EAAE/B,EAAEkD,GAAG,MAAMlB,EAAE,GAAGC,EAAEpC,EAAE,CAACsD,aAAanD,EAAEoD,iBAAiB/B,KAAKC,kBAAkB+B,OAAOxD,GAAG,KAAK,IAAI2C,QAAQ,IAAAN,GAAEzC,EAAE2C,KAAKH,EAAEZ,KAAKO,oBAAoBI,EAAEX,KAAKE,YAAW,QAAE2B,GAAG,IAAI,MAAMpD,KAAKkC,EAAE,qBAAqBlC,EAAEwD,IAAIhB,MAAM,mBAAmBxC,EAAEwD,IAAIhB,MAAM,qBAAqBxC,EAAEwD,IAAIhB,OAAOE,IAAIA,EAAE,IAAIA,EAAEe,KAAKlC,KAAKmC,2BAA2B1D,EAAEoD,KAAKnB,GAAG,SAASjC,EAAEwC,MAAM,iBAAiBxC,EAAE2D,MAAM3D,EAAE2D,KAAKC,QAAQ,MAAM,IAAI5D,EAAE2D,MAAK,QAAE1B,EAAEjC,EAAE2D,KAAK3D,EAAEwD,IAAIK,WAAW,OAAOnB,SAASoB,QAAQC,IAAIrB,GAAGR,EAAEF,iCAAiCrC,EAAEK,GAAG,MAAMiC,EAAEtC,EAAEqE,aAAa,IAAIzC,KAAKK,oBAAoBqC,IAAIhC,GAAG,CAAC,MAAM/B,SAAS,aAAEP,EAAE6D,IAAIU,IAAI,CAACC,aAAa,QAAQC,OAAOpE,GAAGA,EAAEoE,UAAU9B,KAAKf,KAAKK,oBAAoByC,IAAIpC,EAAE/B,IAAIiD,mBAAmBxD,EAAEI,EAAEC,EAAEiC,EAAE/B,EAAEkD,GAAG,MAAMlB,EAAE,GAAG,IAAI,MAAMC,KAAKxC,EAAE,CAACsC,GAAG,mBAAmBA,EAAEtB,cAAcsB,EAAEtB,YAAYsB,EAAEtB,YAAYZ,EAAEG,EAAEkD,IAAI,MAAMzD,EAAE4B,KAAK+C,uBAAuBnC,EAAEpC,EAAEC,EAAEiC,EAAE/B,EAAEkD,GAAG,IAAIzD,EAAE,SAAS,IAAIyC,EAAE,EAAEM,EAAE/C,EAAE4E,SAAS,EAAEC,EAAE7E,EAAE8E,SAAS,EAAEC,GAAE,EAAGC,EAAE,EAAEC,EAAE,EAAE,GAAG,sBAAsB5E,EAAE,CAAC,MAAML,EAAEG,EAAEmC,EAAEE,EAAE,MAAM,GAAGwC,GAAE,QAAExC,EAAE0C,QAAQ9E,EAAEG,EAAEkD,GAAGzD,GAAG,EAAEiF,GAAE,QAAEzC,EAAE2C,QAAQ/E,EAAEG,EAAEkD,GAAGzD,GAAG,EAAE,WAAWwC,EAAEK,KAAKJ,GAAE,QAAED,EAAE4C,SAAShF,EAAEG,EAAEkD,IAAI,EAAEsB,IAAIvC,EAAE6C,iBAAiB7C,EAAE6C,qBAAqB,GAAG,SAAS7C,EAAEK,KAAK,CAAC,GAAGJ,GAAE,QAAED,EAAE8C,MAAMlF,EAAEG,EAAEkD,IAAI,OAAE,IAASjB,EAAE+C,oBAAoB,OAAO/C,EAAE+C,qBAAqB,IAAI,OAAOxC,GAAG,GAAG,MAAM,IAAI,QAAQA,EAAE,GAAG,MAAM,QAAQA,EAAE,EAAE,QAAG,IAASP,EAAEgD,kBAAkB,OAAOhD,EAAEgD,mBAAmB,IAAI,MAAMX,EAAE,GAAG,MAAM,IAAI,SAASA,GAAG,GAAG,MAAM,IAAI,WAAWA,GAAG,IAAI,MAAM,QAAQA,EAAE,IAAI,MAAM7E,GAAGuC,EAAEuB,KAAK,CAACwB,MAAM7C,EAAEgD,gBAAgBV,EAAEH,QAAQ7B,EAAE+B,QAAQD,EAAEK,QAAQF,EAAEG,QAAQF,EAAES,mBAAmB1F,IAAI,OAAO4B,KAAK+D,eAAepD,GAAGoD,eAAe3F,GAAG,MAAMI,EAAEwF,SAASC,cAAc,UAAUxF,EAAED,EAAE0F,WAAW,MAAM,IAAIvF,EAAE,EAAEkD,EAAE,EAAElB,EAAE,EAAEC,EAAE,EAAE,MAAMC,EAAE,GAAG,IAAI,IAAIuC,EAAE,EAAEA,EAAEhF,EAAE+F,OAAOf,IAAI,CAAC,MAAM5E,EAAEJ,EAAEgF,GAAGjC,EAAE3C,EAAEsF,mBAAmB,IAAI3C,EAAE,SAAS,MAAM8B,EAAE9B,EAAEiD,KAAKjB,EAAE3E,EAAE8E,QAAQD,EAAE7E,EAAE+E,QAAQc,EAAE7F,EAAEwE,QAAQsB,EAAE9F,EAAE0E,QAAQqB,EAAE/F,EAAEqF,kBAAiB,EAAG,IAAIW,EAAEhG,EAAEkF,MAAMvF,GAAE,QAAEgF,GAAGF,EAAE,IAAI,GAAGoB,GAAG9F,GAAE,QAAE8E,GAAGJ,EAAE,IAAI,GAAGqB,GAAGjF,EAAElB,EAAE8E,EAAE,GAAGnD,EAAEvB,EAAE0E,EAAE,GAAG,GAAGuB,EAAE,CAACD,IAAIC,GAAGA,GAAG,MAAMpG,EAAEQ,KAAK6F,IAAID,EAAE5F,KAAK8F,GAAG,KAAKlG,EAAEI,KAAK+F,IAAIH,EAAE5F,KAAK8F,GAAG,KAAKjG,EAAEN,EAAEK,EAAED,EAAEH,EAAEsC,EAAEvC,EAAEC,EAAEG,EAAEC,EAAEG,EAAER,EAAEK,EAAEsB,EAAE1B,EAAEyD,EAAE1D,EAAEC,EAAE0B,EAAEtB,EAAEmC,EAAEtB,EAAEb,EAAEsB,EAAE1B,EAAEwC,EAAEvB,EAAEjB,EAAE0B,EAAEtB,EAAEqC,EAAExB,EAAEb,EAAED,EAAEH,EAAE+C,EAAE9B,EAAEjB,EAAEG,EAAEC,EAAEL,EAAES,KAAKgG,IAAInG,EAAEE,EAAEgC,EAAEE,GAAGtC,EAAEK,KAAKgG,IAAIlE,EAAEmB,EAAEjB,EAAEO,GAAG9B,EAAET,KAAKC,IAAIJ,EAAEE,EAAEgC,EAAEE,GAAGf,EAAElB,KAAKC,IAAI6B,EAAEmB,EAAEjB,EAAEO,GAAGxC,EAAER,EAAEQ,EAAER,EAAEQ,EAAEkD,EAAEtD,EAAEsD,EAAEtD,EAAEsD,EAAElB,EAAEtB,EAAEsB,EAAEtB,EAAEsB,EAAEC,EAAEd,EAAEc,EAAEd,EAAEc,EAAE,MAAMc,EAAEjD,EAAEoG,gBAAgB1D,EAAEiD,KAAK,GAAGjD,EAAEiD,KAAK,IAAI1C,EAAEX,KAAK+B,IAAI,IAAIgC,kBAAkB3D,EAAE4D,MAAMC,SAAS,MAAM9D,EAAE,CAACoC,QAAQH,EAAEI,QAAQF,EAAEI,gBAAgBc,EAAEb,MAAMc,EAAES,gBAAgBvD,EAAEsB,QAAQqB,EAAEnB,QAAQoB,GAAGzD,EAAEqB,KAAKhB,GAAG1C,EAAE0G,MAAMvE,EAAEhC,EAAEH,EAAE2G,OAAOvE,EAAEiB,EAAE,MAAMV,GAAGxC,EAAEsE,EAAErC,EAAE,IAAI,IAAIwC,EAAE,EAAEA,EAAEvC,EAAEsD,OAAOf,IAAI,CAAC,MAAMhF,EAAEyC,EAAEuC,GAAG5E,EAAEwB,KAAKoF,mBAAmBhH,EAAE6G,iBAAiBtG,EAAEP,EAAE6G,gBAAgBC,MAAMrD,EAAEzD,EAAE6G,gBAAgBE,OAAOxE,EAAEQ,EAAExC,GAAG,GAAGP,EAAE4E,SAASpC,EAAEqC,EAAEpB,GAAG,GAAGzD,EAAE8E,SAAS,GAAG9E,EAAEsF,MAAM,CAAC,MAAM/E,GAAG,IAAIP,EAAEsF,OAAO9E,KAAK8F,GAAG,IAAIjG,EAAE4G,OAAO5G,EAAE6G,WAAU,QAAElH,EAAEkF,WAAU,QAAElF,EAAEmF,UAAU9E,EAAE6G,UAAUnE,EAAE8B,GAAGxE,EAAE8G,OAAO5G,GAAGF,EAAE6G,WAAWnE,GAAG8B,GAAGxE,EAAE+G,UAAUhH,EAAEmC,EAAEC,GAAGnC,EAAEgH,eAAehH,EAAE+G,UAAUhH,EAAEmC,GAAE,QAAEvC,EAAEkF,SAAS1C,GAAE,QAAExC,EAAEmF,UAAU,MAAMJ,EAAE,IAAI,IAAE,CAACzB,EAAEP,EAAE3C,EAAE0G,MAAM,GAAGb,EAAEpB,EAAEzE,EAAE2G,OAAO,KAAK,MAAM,CAACO,UAAU,IAAIlH,EAAE0G,OAAO,IAAI1G,EAAE2G,OAAO1G,EAAEkH,aAAa,EAAE,EAAEnH,EAAE0G,MAAM1G,EAAE2G,QAAQ1G,EAAEoG,gBAAgB,EAAE,GAAGe,eAAezC,GAAGiC,mBAAmBhH,GAAG4B,KAAK6F,mBAAmB7F,KAAK6F,iBAAiB7B,SAASC,cAAc,WAAW,MAAMzF,EAAEwB,KAAK6F,iBAAiBpH,EAAED,EAAE0F,WAAW,MAAM,OAAO1F,EAAE0G,MAAM9G,EAAE8G,MAAM1G,EAAE2G,OAAO/G,EAAE+G,OAAO1G,EAAEqH,aAAa1H,EAAE,EAAE,GAAGI,EAAEuH,gBAAgBvH,EAAEC,EAAEiC,EAAE/B,GAAGqB,KAAK6F,mBAAmB7F,KAAK6F,iBAAiB7B,SAASC,cAAc,WAAW,MAAMpC,EAAE7B,KAAK6F,iBAAiBlF,EAAEkB,EAAEqC,WAAW,MAAM,GAAGrC,EAAEqD,MAAMzG,EAAEoD,EAAEsD,OAAOzE,EAAEC,EAAE6E,UAAUhH,EAAE,EAAE,EAAEC,EAAEiC,GAAG/B,EAAE,CAACgC,EAAE0E,OAAO,MAAMxD,EAAE,IAAI,IAAElD,GAAGgC,EAAEqF,UAAUnE,EAAEoE,QAAQtF,EAAEuF,yBAAyB,WAAWvF,EAAEwF,SAAS,EAAE,EAAE1H,EAAEiC,GAAGC,EAAEuF,yBAAyB,mBAAmBvF,EAAE6E,UAAUhH,EAAE,EAAE,EAAEC,EAAEiC,GAAGC,EAAE8E,UAAU,OAAO,IAAIW,YAAYzF,EAAEgF,aAAa,EAAE,EAAElH,EAAEiC,GAAGK,KAAKiE,QAAQjC,uBAAuB3E,EAAEI,EAAEC,EAAEiC,EAAEmB,EAAElB,GAAG,IAAIC,EAAEC,EAAEM,EAAE8B,EAAEE,EAAE,KAAKC,EAAE,KAAK,GAAG,yBAAyB3E,GAAG,wBAAwBA,EAAE,CAAC,MAAMwE,EAAEvC,GAAGA,EAAE2F,MAAM3F,EAAE2F,MAAMlI,EAAEE,OAAOgF,EAAE,yBAAyB5E,EAAEY,EAAEO,OAAOqD,GAAG5D,EAAEC,KAAK2D,GAAG,GAAG,SAAS7E,EAAE6C,KAAK,CAAC,GAAG,mBAAmB7C,EAAE6D,IAAIhB,KAAK,CAAC,GAAG,qBAAqB7C,EAAE6D,IAAIhB,KAAK,CAAC,MAAMxC,GAAE,QAAEL,EAAE8G,MAAM1G,EAAEqD,EAAElB,GAAGD,GAAE,QAAEtC,EAAEkI,MAAM9H,EAAEqD,EAAElB,IAAIoE,MAAMpG,EAAEuG,MAAMtE,EAAEuE,OAAOtE,GAAGb,KAAKuG,oBAAoBnI,EAAEK,EAAEiC,GAAG,OAAOV,KAAKwG,0BAA0BpI,EAAEO,EAAEiC,EAAEC,EAAEwC,EAAE5E,GAAG,OAAO,OAAOgI,YAAY7F,EAAE8F,KAAKvF,GAAGwF,EAAEvI,EAAEI,EAAEqD,EAAElB,IAAIE,EAAEb,KAAK4G,6BAA6BhG,EAAEyC,QAAQ,GAAG,WAAWjF,EAAE6C,KAAK,CAAC,GAAG,qBAAqB7C,EAAE6D,IAAIhB,KAAK,OAAO,KAAK,GAAG,oBAAoB7C,EAAE6D,IAAIhB,KAAK,OAAO,KAAK7C,EAAE6D,IAAIqB,SAAQ,QAAElF,EAAEkF,QAAQ9E,EAAEqD,EAAElB,GAAGvC,EAAE6D,IAAIsB,SAAQ,QAAEnF,EAAEmF,QAAQ/E,EAAEqD,EAAElB,GAAGvC,EAAE6D,IAAIuB,UAAS,QAAEpF,EAAEoF,SAAShF,EAAEqD,EAAElB,GAAGvC,EAAE6D,IAAI4E,gBAAgBzI,EAAEyI,kBAAkBJ,YAAY7F,GAAG+F,EAAEvI,EAAEI,EAAEqD,EAAElB,IAAIQ,GAAE,QAAE2F,KAAKC,UAAUnG,IAAIoG,WAAWnG,EAAEb,KAAK4G,6BAA6BhG,EAAEyC,GAAGF,GAAE,QAAE/E,EAAEgG,KAAK5F,EAAEqD,EAAElB,GAAGyC,EAAEhF,EAAE6I,SAAS,CAAC,GAAG,SAAS7I,EAAE6C,KAAK,OAAO,KAAK,GAAG,SAAS7C,EAAE6C,KAAK,CAAC,GAAG,iBAAiB7C,EAAE6D,IAAIhB,MAAM,oBAAoB7C,EAAE6D,IAAIhB,MAAM,qBAAqB7C,EAAE6D,IAAIhB,MAAM,mBAAmB7C,EAAE6D,IAAIhB,KAAK,CAAC,MAAMxC,EAAEL,EAAE6D,IAAImC,MAAMhG,EAAE6D,IAAIkD,OAAO,IAAIzE,EAAE/B,EAAEkC,EAAE,GAAG,qBAAqBzC,EAAE6D,IAAIhB,MAAM,mBAAmB7C,EAAE6D,IAAIhB,OAAO8D,MAAMrE,EAAEwE,MAAMvG,EAAEwG,OAAOtE,GAAGb,KAAKuG,oBAAoBnI,EAAEK,GAAE,QAAEL,EAAEkI,MAAM9H,EAAEqD,EAAElB,SAAS,GAAG8F,YAAY7F,EAAE8F,KAAKvF,GAAGwF,EAAEvI,EAAEI,EAAEqD,EAAElB,IAAI,MAAMsC,EAAEjD,KAAKQ,YAAY0G,sBAAsB,CAACjF,IAAIrB,EAAEK,KAAK7C,EAAE6C,KAAK0B,IAAIvE,EAAEuE,IAAIwE,WAAWhG,EAAEiD,KAAK3F,EAAEwI,KAAK7D,GAAG,EAAEpD,KAAKE,WAAWQ,EAAEuC,EAAE8B,MAAMpG,EAAEsE,EAAEmB,KAAK,GAAGvD,EAAEoC,EAAEmB,KAAK,GAAG,OAAOpE,KAAKwG,0BAA0BpI,EAAEsC,EAAE/B,EAAEkC,EAAEwC,EAAE,MAAM,GAAG,iBAAiBjF,EAAE6D,IAAIhB,KAAK,OAAO,OAAOwF,YAAY7F,EAAE8F,KAAKvF,GAAGwF,EAAEvI,EAAEI,EAAEqD,EAAElB,IAAIE,EAAEb,KAAK4G,6BAA6BhG,EAAEyC,SAAS,CAAC,GAAG,SAASjF,EAAE6C,KAAK,OAAOgC,EAAEjD,KAAKoH,uBAAuBhJ,EAAEI,EAAEkC,EAAEmB,EAAElB,GAAGsC,IAAIwD,YAAY7F,EAAE8F,KAAKvF,GAAGwF,EAAEvI,EAAEI,EAAEqD,EAAElB,IAAI,MAAMlC,EAAEF,EAAEmC,EAAEtC,EAAE,MAAM,GAAG,qBAAqBA,EAAE6D,IAAIhB,KAAK,CAAC,MAAMP,GAAE,QAAEtC,EAAEgG,KAAK5F,EAAEqD,EAAElB,GAAGlC,GAAGsG,MAAMpG,EAAEuG,MAAMtE,EAAEuE,OAAOtE,GAAGb,KAAKuG,oBAAoBnI,EAAEsC,GAAE,QAAEtC,EAAEkI,MAAM9H,EAAEqD,EAAElB,IAAI,OAAOsC,EAAE,CAAC8B,MAAMpG,EAAEyF,KAAK,CAACxD,EAAEC,GAAGwG,KAAI,EAAGC,eAAc,EAAGtE,QAAQ5E,EAAEmJ,YAAYnJ,EAAEmJ,YAAY7F,EAAE,EAAEwB,QAAQ9E,EAAEmJ,YAAYnJ,EAAEmJ,YAAYlD,EAAE,GAAGpB,GAAE,QAAErC,EAAEnC,EAAE,CAAC+I,sBAAqB,IAAK3G,EAAED,EAAEO,GAAG1C,EAAEiC,IAAIS,GAAG2F,KAAKC,UAAUrG,IAAI,MAAM2C,EAAErD,KAAKG,eAAe,OAAOkD,EAAEoE,IAAItG,GAAGkC,EAAEX,IAAIvB,IAAI8B,EAAEjD,KAAKQ,YAAY0G,sBAAsB,CAACjF,IAAIpB,EAAEI,KAAK7C,EAAE6C,KAAK0B,IAAIvE,EAAEuE,IAAIwE,WAAWhG,EAAEiD,KAAKjB,EAAE8D,KAAK7D,GAAGsE,OAAOC,kBAAkB,EAAE3H,KAAKE,WAAWmD,EAAEP,IAAI3B,EAAE8B,GAAGA,GAAGmE,uBAAuBhJ,EAAEI,EAAEC,EAAEiC,EAAE/B,GAAG,MAAMkD,EAAEtD,EAAEE,EAAEL,EAAE,MAAMuC,GAAE,QAAEvC,EAAEgE,KAAK5D,EAAEkC,EAAE/B,GAAG,IAAIgC,GAAG,IAAIA,EAAEwD,OAAO,OAAO,KAAK,MAAMvD,GAAE,QAAExC,EAAEwJ,SAASpJ,EAAEkC,EAAE/B,GAAGkC,GAAE,QAAEzC,EAAEiI,MAAM7H,EAAEkC,EAAE/B,GAAGwC,GAAE,QAAE/C,EAAEyJ,OAAOrJ,EAAEkC,EAAE/B,GAAGsE,GAAE,QAAE7E,EAAE0J,WAAWtJ,EAAEkC,EAAE/B,GAAGwE,GAAE,QAAE/E,EAAEgG,KAAK5F,EAAEkC,EAAE/B,GAAGkD,EAAEuB,GAAE,QAAEhF,EAAEuF,oBAAoBnF,EAAEkC,EAAE/B,GAAG0E,GAAE,QAAEjF,EAAEwF,kBAAkBpF,EAAEkC,EAAE/B,GAAG4F,GAAE,SAAE,QAAEnG,EAAEkI,MAAM9H,EAAEkC,EAAE/B,IAAI6F,GAAE,SAAE,QAAEpG,EAAE2J,aAAavJ,EAAEkC,EAAE/B,IAAIR,EAAE,CAACmI,MAAM/B,EAAEH,KAAKjB,EAAEQ,oBAAoBP,EAAEQ,kBAAkBP,EAAE2E,KAAK,CAACC,OAAOrH,EAAEyF,MAAMxF,EAAEgH,OAAO1G,EAAE2G,WAAW7E,GAAGiF,KAAK,CAAC9D,MAAK,QAAEhG,EAAE+J,YAAY3J,EAAEkC,EAAE/B,IAAI,EAAE2H,MAAM9B,EAAE6B,MAAMxF,GAAGuH,WAAW,EAAEC,mBAAmBrI,KAAKE,WAAW,OAAOF,KAAKM,gBAAgBgI,cAAc3H,EAAExC,GAAGqI,0BAA0BpI,EAAEI,EAAEC,EAAEE,EAAEkD,EAAEhB,GAAG,MAAMM,EAAE6C,SAASC,cAAc,UAAUhB,EAAE9B,EAAE+C,WAAW,MAAM/C,EAAEgE,QAAO,QAAEvG,KAAKC,IAAIgD,EAAE/C,MAAMG,KAAK4C,EAAE/C,MAAMI,KAAK2B,IAAIM,EAAE+D,OAAM,QAAErD,EAAE/C,MAAMC,KAAK8C,EAAE/C,MAAME,MAAM,MAAMmE,EAAEF,EAAE4B,gBAAgBpG,EAAEE,GAAGwE,EAAEpC,KAAK+B,IAAI,IAAIgC,kBAAkBtG,EAAEwG,SAAS,MAAM5B,EAAEpD,KAAKoF,mBAAmBjC,GAAGE,EAAEJ,EAAEsF,cAAcnF,EAAE,UAAUiB,EAAEzF,KAAK+F,MAAMvG,EAAE6D,IAAIuB,UAAU,GAAG5E,KAAK8F,GAAG,KAAKJ,EAAE1F,KAAK6F,MAAMrG,EAAE6D,IAAIuB,UAAU,GAAG5E,KAAK8F,GAAG,KAAKrB,EAAEmF,aAAa,CAACC,IAAIpE,EAAEqE,IAAIpE,EAAEqE,KAAKrE,EAAEsE,IAAIvE,EAAEwE,KAAI,QAAEzK,EAAE6D,IAAIqB,UAAU,EAAEwF,KAAI,QAAE1K,EAAE6D,IAAIsB,UAAU,IAAI,MAAMgB,EAAE1C,EAAEnC,YAAY,IAAI8E,EAAErG,EAAEI,GAAE,QAAEgG,IAAIC,EAAED,EAAE9E,MAAMwD,EAAE+C,UAAU3C,EAAElF,EAAE8E,EAAE3D,KAAKf,EAAE,CAAC,aAAY,QAAEgG,KAAKC,EAAED,EAAE1E,MAAMoD,EAAE8F,YAAY1F,EAAEJ,EAAE+F,UAAUnI,EAAE1C,EAAE8E,EAAErD,OAAO4E,EAAE,GAAG,GAAG,GAAGrD,EAAEgE,OAAO,EAAEX,EAAE,GAAG,GAAG,GAAGrD,EAAEgE,OAAO,GAAGlC,EAAEgG,YAAY,IAAI,MAAMtI,KAAK6D,EAAE,CAAC,MAAMpG,EAAEuC,EAAEA,EAAEwD,OAAO,EAAE,GAAG/F,EAAE,EAAE,CAAC,IAAII,EAAEmC,EAAE,GAAGsC,EAAEiG,QAAO,QAAE1K,EAAE,KAAI,QAAEA,EAAE,KAAK,IAAI,IAAIC,EAAE,EAAEA,EAAEL,IAAIK,EAAED,EAAEmC,EAAElC,GAAGwE,EAAEkG,QAAO,QAAE3K,EAAE,KAAI,QAAEA,EAAE,KAAKyE,EAAEmG,aAAajL,EAAEkL,MAAMpG,EAAE1E,GAAG,MAAMc,EAAE4D,EAAE0C,aAAa,EAAE,EAAExE,EAAE+D,MAAM/D,EAAEgE,QAAQrF,EAAE,IAAIwJ,WAAWjK,EAAE0B,MAAM,MAAM,CAACqD,KAAK,CAACjD,EAAE+D,MAAM/D,EAAEgE,QAAQJ,MAAM,IAAIqB,YAAYtG,EAAEkF,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQ,EAAEE,QAAQ,GAAGqD,oBAAoBnI,EAAEI,EAAEC,GAAG,MAAME,EAAEqB,KAAKK,oBAAoBqC,IAAItE,EAAEqE,cAAc,IAAI9D,EAAE,OAAO,KAAK,MAAMkD,EAAElD,EAAEwG,OAAOxG,EAAEuG,MAAMvE,EAAEnC,EAAEqD,EAAE,GAAE,QAAErD,IAAG,QAAEA,GAAGqD,EAAElD,EAAEuG,MAAMtE,EAAEpC,EAAEqD,EAAE,GAAE,QAAErD,GAAGqD,GAAE,QAAErD,GAAGG,EAAEwG,OAAO,MAAM,CAACJ,MAAM/E,KAAK+F,gBAAgBpH,EAAEgC,EAAEC,EAAEnC,GAAGyG,MAAMvE,EAAEwE,OAAOvE,GAAGgG,6BAA6BxI,EAAEI,GAAG,MAAMC,GAAE,QAAED,EAAEgB,UAAU,mBAAmB,gBAAgBkB,EAAElC,EAAEM,MAAM,MAAM,CAACmC,KAAK,kBAAkBnC,MAAM4B,EAAE0D,KAAK1D,EAAEzB,KAAKyB,EAAExB,KAAKqK,eAAe,CAAC,CAACtI,KAAK,mBAAmBzB,SAAShB,EAAEgB,SAASwB,OAAO,CAACC,KAAKxC,EAAE+K,aAAa,CAACpL,QAAsa,SAASuI,EAAEvI,EAAEI,EAAEC,EAAEiC,GAAG,IAAI/B,EAAEkD,EAAiI,MAA5H,mBAAmBzD,EAAEqE,cAAc9D,GAAE,EAAGP,EAAEqE,cAAcjE,EAAEC,EAAEiC,GAAGmB,GAAE,OAAEzD,EAAE6D,IAAI7D,EAAEqL,qBAAwB9K,EAAEP,EAAEqE,aAAaZ,EAAEzD,EAAE6D,KAAU,CAACwE,YAAY5E,EAAE6E,KAAK/H,K,+ECAv7U,MAAMsE,EAAElD,YAAY3B,GAAG4B,KAAK0J,iBAAiBtL,EAAEuL,UAAU3J,KAAK4J,qBAAqB,KAAK1C,sBAAsBrF,EAAElB,EAAEsC,GAAG,GAAGjD,KAAK4J,uBAAuB5J,KAAK4J,qBAAqB5F,SAASC,cAAc,WAAW,gBAAgBpC,EAAEZ,MAAM,YAAYY,EAAEZ,KAAK,CAAC,MAAMzC,EAAEC,EAAEiC,GAAG,yBAAsBV,KAAK4J,qBAAqB/H,EAAEwE,MAAM1F,GAAG,MAAM,CAACyD,KAAK,CAAC3F,EAAEiC,GAAGqE,MAAM,IAAIqB,YAAY5H,EAAEwG,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQ,EAAEE,QAAQ,GAAG,GAAG,gBAAgBrB,EAAEZ,MAAM,YAAYY,EAAEZ,MAAM,SAASY,EAAEZ,MAAMY,EAAEgI,aAAa,CAAC,IAAIpL,EAAEiC,EAAE,GAAG,gBAAgBmB,EAAEZ,MAAM,YAAYY,EAAEZ,KAAK,OAAOxC,GAAE,QAAEoD,EAAEwE,MAAMxE,EAAEiI,KAAKjI,EAAEiI,KAAK,IAAI,OAAOpJ,EAAE,OAAO,MAAM,IAAI,SAASA,EAAE,SAAS,MAAM,QAAQA,EAAE,aAAajC,EAAEoD,EAAEgI,aAAanJ,EAAEmB,EAAEI,IAAI8H,SAAS,MAAMpL,EAAEiC,EAAED,GAAG,yBAAsBlC,EAAEiC,GAAG,MAAM,CAAC0D,KAAK,CAACxD,EAAED,GAAGoE,MAAM,IAAIqB,YAAYzH,EAAEqG,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQ,EAAEE,QAAQ,GAAG,IAAI/B,EAAEN,EAAEuC,EAAE,GAAG,kBAAkBvB,EAAEZ,MAAM,YAAYY,EAAEZ,MAAM,gBAAgBY,EAAEZ,MAAME,EAAE,sBAAmBU,GAAGuB,GAAE,QAAEjC,IAAIU,EAAEI,KAAK,iBAAiBJ,EAAEI,IAAIhB,MAAME,EAAE,sBAAmBU,EAAEI,KAAKpB,EAAE,IAAI,IAAEM,EAAErC,MAAME,MAAMmC,EAAErC,MAAMG,KAAKkC,EAAErC,MAAMC,KAAKoC,EAAErC,MAAME,KAAKmC,EAAErC,MAAMG,KAAKkC,EAAErC,MAAMI,OAAO2C,EAAEI,IAAI4E,iBAAiB,oCAAoChF,EAAEI,IAAI4E,gBAAgB5F,MAAME,EAAE,0BAAuBU,EAAEI,KAAKpB,EAAE,IAAI,IAAEM,EAAErC,MAAME,MAAMmC,EAAErC,MAAMG,KAAKkC,EAAErC,MAAMC,KAAKoC,EAAErC,MAAME,KAAKmC,EAAErC,MAAMG,KAAKkC,EAAErC,MAAMI,QAAQiC,EAAEU,EAAEI,IAAImB,GAAE,QAAEjC,IAAIiC,IAAIH,EAAE,CAAC,MAAM7E,EAAEI,EAAEC,IAAG,QAAE2E,GAAG,OAAOhF,EAAE,CAACgG,KAAK,CAAC5F,EAAEC,GAAGsG,MAAM,IAAIqB,YAAYhI,EAAE4G,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQ,EAAEE,QAAQ,GAAG,KAAK,MAAMqB,EAAEpB,EAAEmB,EAAED,EAAEG,GAAG,eAAYxE,KAAK4J,qBAAqBzI,EAAEN,EAAEb,KAAK0J,kBAAkBzG,GAAG,OAAOsB,EAAE,CAACH,KAAK,CAACjB,EAAEmB,GAAGS,MAAM,IAAIqB,YAAY7B,EAAES,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQqB,EAAEnB,QAAQsB,GAAG,KAAKwF,uBAAuB5L,EAAEI,EAAEC,EAAEiC,GAAGV,KAAK4J,uBAAuB5J,KAAK4J,qBAAqB5F,SAASC,cAAc,WAAWjE,KAAK4J,qBAAqB1E,MAAM9G,EAAE4B,KAAK4J,qBAAqBzE,OAAO3G,EAAE,MAAMG,EAAEqB,KAAK4J,qBAAqB1F,WAAW,MAAMzF,aAAawL,UAAUtL,EAAEmH,aAAarH,EAAE,EAAE,IAAIA,EAAEyL,aAAa,QAAQ,GAAG9L,OAAOK,EAAEyL,aAAa,SAAS,GAAG1L,OAAOG,EAAE6G,UAAU/G,EAAE,EAAE,EAAEL,EAAEI,IAAI,MAAMoC,EAAEjC,EAAEgH,aAAa,EAAE,EAAEvH,EAAEI,GAAGyE,EAAE,IAAIqG,WAAW1I,EAAEG,MAAM,GAAGL,EAAE,IAAI,MAAMmB,KAAKnB,EAAE,GAAGmB,GAAGA,EAAEsI,UAAU,IAAItI,EAAEsI,SAAShG,QAAQtC,EAAEuI,UAAU,IAAIvI,EAAEuI,SAASjG,OAAO,CAAC,MAAM/F,EAAEI,EAAEC,EAAEiC,GAAGmB,EAAEsI,UAAUxL,EAAEiC,EAAED,EAAEQ,GAAGU,EAAEuI,SAAS,GAAGhM,IAAIO,GAAGH,IAAIoC,GAAGnC,IAAIkC,GAAGD,IAAIS,EAAE,SAAS,IAAI,IAAIU,EAAE,EAAEA,EAAEoB,EAAEkB,OAAOtC,GAAG,EAAEzD,IAAI6E,EAAEpB,IAAIrD,IAAIyE,EAAEpB,EAAE,IAAIpD,IAAIwE,EAAEpB,EAAE,IAAInB,IAAIuC,EAAEpB,EAAE,KAAKoB,EAAEpB,GAAGlD,EAAEsE,EAAEpB,EAAE,GAAGjB,EAAEqC,EAAEpB,EAAE,GAAGlB,EAAEsC,EAAEpB,EAAE,GAAGV,GAAG,IAAIA,EAAE,IAAI,IAAIU,EAAE,EAAEA,EAAEoB,EAAEkB,OAAOtC,GAAG,EAAEV,EAAE8B,EAAEpB,EAAE,GAAG,IAAIoB,EAAEpB,GAAGoB,EAAEpB,GAAGV,EAAE8B,EAAEpB,EAAE,GAAGoB,EAAEpB,EAAE,GAAGV,EAAE8B,EAAEpB,EAAE,GAAGoB,EAAEpB,EAAE,GAAGV,EAAE,IAAIN,EAAEoC,EAAEG,EAAEhF,EAAEmG,EAAE/F,EAAE,MAAM2E,EAAx7E,IAA47E,GAAGC,GAAGD,GAAGoB,GAAGpB,EAAE,CAAC,MAAM1E,EAAE2E,EAAEmB,EAAE9F,EAAE,GAAG2E,EAAED,EAAEoB,EAAE3F,KAAKyL,MAAMlH,EAAE1E,KAAK8F,EAAEpB,EAAEC,EAAExE,KAAKyL,MAAMlH,EAAE1E,IAAIoC,EAAE,IAAIyI,WAAW,EAAElG,EAAEmB,GAAG,MAAM7D,EAAE,IAAIoE,kBAAkBjE,EAAEmE,SAAQ,QAAE/B,EAAE7E,EAAEI,EAAEkC,EAAE0C,EAAEmB,GAAE,GAAI,MAAM,CAACH,KAAK,CAAChB,EAAEmB,GAAGQ,MAAM,IAAIqB,YAAYvF,EAAEmE,QAAQqC,KAAI,EAAGC,eAAc,EAAGtE,QAAQ,EAAEE,QAAQ,M,mDCAt6F,MAAMtC,EAAE,IAAI0J,aAAa,GAAoY,SAASnM,EAAEyC,GAAG,MAAM,CAAC,IAAIA,GAAG,MAAMA,KAAK,GAAG,SAASA,KAAK,IAAI,WAAWA,KAAK,IAA0C,SAAS+F,EAAE/F,EAAEnC,GAAG,OAAO,MAAMmC,EAAEnC,GAAG,GAAG,SAASiD,EAAEd,EAAEnC,EAAED,EAAE8F,GAAG,OAAO,IAAI1D,GAAG,IAAInC,IAAI,GAAG,IAAID,IAAI,GAAG8F,GAAG,GAArlB,IAAI8B,YAAYxF,EAAEoE","sources":["webpack://momraGisCore/./node_modules/@arcgis/core/symbols/cim/CIMSymbolRasterizer.js","webpack://momraGisCore/./node_modules/@arcgis/core/symbols/cim/Rasterizer.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/2d/engine/webgl/number.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../Color.js\";import t from\"../../request.js\";import{throwIfAborted as r}from\"../../core/promiseUtils.js\";import{pt2px as a}from\"../../core/screenUtils.js\";import{numericHash as i}from\"../../core/string.js\";import{getJsonType as s,isPolygon as o,isPolyline as n}from\"../../geometry/support/jsonUtils.js\";import{analyzeCIMSymbol as c,analyzeCIMResource as l}from\"./cimAnalyzer.js\";import m from\"./CIMResourceManager.js\";import h from\"./Rasterizer.js\";import{TextRasterizer as f}from\"./TextRasterizer.js\";import{createLabelOverrideFunction as g,evaluateValueOrFunction as y,colorToArray as u}from\"./utils.js\";import{scaleCIMMarker as p}from\"../support/cimSymbolUtils.js\";import d from\"../support/Symbol3DAnchorPosition2D.js\";var M;!function(e){e.Legend=\"legend\",e.Preview=\"preview\"}(M||(M={}));const C=(e,t,r)=>{if(e&&e.targetSize){let i;if(r){const t=Math.max(r.frame.xmax-r.frame.xmin,r.frame.ymax-r.frame.ymin);i=e.targetSize/a(t)}else i=e.targetSize/t.referenceSize;return i}return e&&e.scaleFactor?e.scaleFactor:1},I={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class z{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new f,this._cimResourceManager=new m,this._rasterizer=new h(this._cimResourceManager)}async rasterizeCIMSymbolAsync(e,t,r,a,i,o,n,c){a=a||(t?null!=t.centroid?\"esriGeometryPolygon\":s(t.geometry):null)||P(e);const l=await this.analyzeCIMSymbol(e,t?x(t.attributes):null,r,a,c);return this.rasterizeCIMSymbol(l,t,a,i,o,n)}async analyzeCIMSymbol(e,t,a,i,s){const o=[],n=t?{geometryType:i,spatialReference:this._spatialReference,fields:t}:null;let l;await c(e.data,n,this._cimResourceManager,o,this._avoidSDF),r(s);for(const r of o)\"CIMPictureMarker\"!==r.cim.type&&\"CIMPictureFill\"!==r.cim.type&&\"CIMPictureStroke\"!==r.cim.type||(l||(l=[]),l.push(this.fetchPictureMarkerResource(r,s))),a&&\"text\"===r.type&&\"string\"==typeof r.text&&r.text.indexOf(\"[\")>-1&&(r.text=g(a,r.text,r.cim.textCase));return l&&await Promise.all(l),o}async fetchPictureMarkerResource(e,r){const a=e.materialHash;if(!this._pictureMarkerCache.get(a)){const i=(await t(e.cim.url,{responseType:\"image\",signal:r&&r.signal})).data;this._pictureMarkerCache.set(a,i)}}rasterizeCIMSymbol(e,t,r,a,i,s){const o=[];for(const n of e){a&&\"function\"==typeof a.scaleFactor&&(a.scaleFactor=a.scaleFactor(t,i,s));const e=this._getRasterizedResource(n,t,r,a,i,s);if(!e)continue;let c=0,l=e.anchorX||0,m=e.anchorY||0,h=!1,f=0,g=0;if(\"esriGeometryPoint\"===r){const e=C(a,n,null);if(f=y(n.offsetX,t,i,s)*e||0,g=y(n.offsetY,t,i,s)*e||0,\"marker\"===n.type)c=y(n.rotation,t,i,s)||0,h=!!n.rotateClockwise&&n.rotateClockwise;else if(\"text\"===n.type){if(c=y(n.angle,t,i,s)||0,void 0!==n.horizontalAlignment)switch(n.horizontalAlignment){case\"left\":l=-.5;break;case\"right\":l=.5;break;default:l=0}if(void 0!==n.verticalAlignment)switch(n.verticalAlignment){case\"top\":m=.5;break;case\"bottom\":m=-.5;break;case\"baseline\":m=-.25;break;default:m=0}}}null!=e&&o.push({angle:c,rotateClockWise:h,anchorX:l,anchorY:m,offsetX:f,offsetY:g,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement(\"canvas\"),r=t.getContext(\"2d\");let i=0,s=0,o=0,n=0;const c=[];for(let f=0;f<e.length;f++){const t=e[f],l=t.rasterizedResource;if(!l)continue;const m=l.size,h=t.offsetX,g=t.offsetY,y=t.anchorX,u=t.anchorY,p=t.rotateClockWise||!1;let d=t.angle,M=a(h)-m[0]*(.5+y),C=a(g)-m[1]*(.5+u),I=M+m[0],z=C+m[1];if(d){p&&(d=-d);const e=Math.sin(d*Math.PI/180),t=Math.cos(d*Math.PI/180),r=M*t-C*e,a=M*e+C*t,i=M*t-z*e,s=M*e+z*t,o=I*t-z*e,n=I*e+z*t,c=I*t-C*e,l=I*e+C*t;M=Math.min(r,i,o,c),C=Math.min(a,s,n,l),I=Math.max(r,i,o,c),z=Math.max(a,s,n,l)}i=M<i?M:i,s=C<s?C:s,o=I>o?I:o,n=z>n?z:n;const x=r.createImageData(l.size[0],l.size[1]);x.data.set(new Uint8ClampedArray(l.image.buffer));const P={offsetX:h,offsetY:g,rotateClockwise:p,angle:d,rasterizedImage:x,anchorX:y,anchorY:u};c.push(P)}t.width=o-i,t.height=n-s;const l=-i,m=n;for(let f=0;f<c.length;f++){const e=c[f],t=this._imageDataToCanvas(e.rasterizedImage),i=e.rasterizedImage.width,s=e.rasterizedImage.height,o=l-i*(.5+e.anchorX),n=m-s*(.5-e.anchorY);if(e.angle){const i=(360-e.angle)*Math.PI/180;r.save(),r.translate(a(e.offsetX),-a(e.offsetY)),r.translate(l,m),r.rotate(i),r.translate(-l,-m),r.drawImage(t,o,n),r.restore()}else r.drawImage(t,o+a(e.offsetX),n-a(e.offsetY))}const h=new d({x:l/t.width-.5,y:m/t.height-.5});return{imageData:0!==t.width&&0!==t.height?r.getImageData(0,0,t.width,t.height):r.createImageData(1,1),anchorPosition:h}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const t=this._imageDataCanvas,r=t.getContext(\"2d\");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t}_imageTo32Array(t,r,a,i){this._imageDataCanvas||(this._imageDataCanvas=document.createElement(\"canvas\"));const s=this._imageDataCanvas,o=s.getContext(\"2d\");if(s.width=r,s.height=a,o.drawImage(t,0,0,r,a),i){o.save();const s=new e(i);o.fillStyle=s.toHex(),o.globalCompositeOperation=\"multiply\",o.fillRect(0,0,r,a),o.globalCompositeOperation=\"destination-atop\",o.drawImage(t,0,0,r,a),o.restore()}return new Uint32Array(o.getImageData(0,0,r,a).data.buffer)}_getRasterizedResource(e,t,r,a,s,o){let n,c,l,m,h=null,f=null;if(\"esriGeometryPolyline\"===r||\"esriGeometryPolygon\"===r){const m=a&&a.style?a.style:M.Legend,g=\"esriGeometryPolyline\"===r?I.stroke[m]:I.fill[m];if(\"line\"===e.type){if(\"CIMSolidStroke\"!==e.cim.type){if(\"CIMPictureStroke\"===e.cim.type){const r=y(e.width,t,s,o),a=y(e.color,t,s,o),{image:i,width:n,height:c}=this._getPictureResource(e,r,a);return this._rasterizePictureResource(e,i,n,c,g,r)}return null}({analyzedCIM:n,hash:l}=w(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,g)}else if(\"marker\"===e.type){if(\"CIMPictureMarker\"===e.cim.type)return null;if(\"CIMVectorMarker\"!==e.cim.type)return null;e.cim.offsetX=y(e.offsetX,t,s,o),e.cim.offsetY=y(e.offsetY,t,s,o),e.cim.rotation=y(e.rotation,t,s,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:n}=w(e,t,s,o)),l=i(JSON.stringify(n)).toString(),c=this._embedCIMLayerInVectorMarker(n,g),h=y(e.size,t,s,o),f=e.path}else{if(\"text\"===e.type)return null;if(\"fill\"===e.type){if(\"CIMHatchFill\"===e.cim.type||\"CIMVectorMarker\"===e.cim.type||\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type){const r=e.cim.size||e.cim.height;let a,i,c;if(\"CIMPictureMarker\"===e.cim.type||\"CIMPictureFill\"===e.cim.type)({image:a,width:i,height:c}=this._getPictureResource(e,r,y(e.color,t,s,o)));else{({analyzedCIM:n,hash:l}=w(e,t,s,o));const m=this._rasterizer.rasterizeJSONResource({cim:n,type:e.type,url:e.url,mosaicHash:l,size:r,path:f},1,this._avoidSDF);a=m.image,i=m.size[0],c=m.size[1]}return this._rasterizePictureResource(e,a,i,c,g,null)}if(\"CIMSolidFill\"!==e.cim.type)return null;({analyzedCIM:n,hash:l}=w(e,t,s,o)),c=this._embedCIMLayerInVectorMarker(n,g)}}}else{if(\"text\"===e.type)return m=this._rasterizeTextResource(e,t,a,s,o),m;({analyzedCIM:n,hash:l}=w(e,t,s,o));const r=C(a,e,null);if(\"CIMPictureMarker\"===e.cim.type){const a=y(e.size,t,s,o)*r,{image:i,width:n,height:c}=this._getPictureResource(e,a,y(e.color,t,s,o));return m={image:i,size:[n,c],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},m}p(n,r,{preserveOutlineWidth:!1}),c=n}l+=r,a&&(l+=JSON.stringify(a));const g=this._resourceCache;return g.has(l)?g.get(l):(m=this._rasterizer.rasterizeJSONResource({cim:c,type:e.type,url:e.url,mosaicHash:l,size:h,path:f},window.devicePixelRatio||1,this._avoidSDF),g.set(l,m),m)}_rasterizeTextResource(e,t,r,a,i){const s=C(r,e,null),o=y(e.text,t,a,i);if(!o||0===o.length)return null;const n=y(e.fontName,t,a,i),c=y(e.style,t,a,i),l=y(e.weight,t,a,i),m=y(e.decoration,t,a,i),h=y(e.size,t,a,i)*s,f=y(e.horizontalAlignment,t,a,i),g=y(e.verticalAlignment,t,a,i),p=u(y(e.color,t,a,i)),d=u(y(e.outlineColor,t,a,i)),M={color:p,size:h,horizontalAlignment:f,verticalAlignment:g,font:{family:n,style:c,weight:l,decoration:m},halo:{size:y(e.outlineSize,t,a,i)||0,color:d,style:c},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,M)}_rasterizePictureResource(e,t,r,i,s,c){const l=document.createElement(\"canvas\"),m=l.getContext(\"2d\");l.height=a(Math.max(s.frame.ymax-s.frame.ymin,c)),l.width=a(s.frame.xmax-s.frame.xmin);const h=m.createImageData(r,i);h.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(h),g=m.createPattern(f,\"repeat\"),y=Math.cos((-e.cim.rotation||0)*Math.PI/180),u=Math.sin((-e.cim.rotation||0)*Math.PI/180);g.setTransform({m11:y,m12:u,m21:-u,m22:y,m41:a(e.cim.offsetX)||0,m42:a(e.cim.offsetY)||0});const p=s.canvasPaths;let d,M,C;o(p)?(d=p.rings,m.fillStyle=g,M=m.fill,C=[\"evenodd\"]):n(p)&&(d=p.paths,m.strokeStyle=g,m.lineWidth=c,M=m.stroke,d[0][0][1]=l.height/2,d[0][1][1]=l.height/2),m.beginPath();for(const o of d){const e=o?o.length:0;if(e>1){let t=o[0];m.moveTo(a(t[0]),a(t[1]));for(let r=1;r<e;++r)t=o[r],m.lineTo(a(t[0]),a(t[1]));m.closePath()}}M.apply(m,C);const I=m.getImageData(0,0,l.width,l.height),z=new Uint8Array(I.data);return{size:[l.width,l.height],image:new Uint32Array(z.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t,r){const i=this._pictureMarkerCache.get(e.materialHash);if(!i)return null;const s=i.height/i.width,o=t?s>1?a(t):a(t)/s:i.width,n=t?s>1?a(t)*s:a(t):i.height;return{image:this._imageTo32Array(i,o,n,r),width:o,height:n}}_embedCIMLayerInVectorMarker(e,t){const r=o(t.geometry)?\"CIMPolygonSymbol\":\"CIMLineSymbol\",a=t.frame;return{type:\"CIMVectorMarker\",frame:a,size:a.ymax-a.ymin,markerGraphics:[{type:\"CIMMarkerGraphic\",geometry:t.geometry,symbol:{type:r,symbolLayers:[e]}}]}}}function x(e){return(e?Object.keys(e):[]).map((t=>({name:t,alias:t,type:\"string\"==typeof e[t]?\"esriFieldTypeString\":\"esriFieldTypeDouble\"})))}function P(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case\"CIMPointSymbol\":case\"CIMTextSymbol\":return\"esriGeometryPoint\";case\"CIMLineSymbol\":return\"esriGeometryPolyline\";case\"CIMPolygonSymbol\":return\"esriGeometryPolygon\";default:return null}}function w(e,t,r,a){let i,s;if(\"function\"==typeof e.materialHash){i=(0,e.materialHash)(t,r,a),s=l(e.cim,e.materialOverrides)}else i=e.materialHash,s=e.cim;return{analyzedCIM:s,hash:i}}export{z as CIMSymbolRasterizer,M as GeometryStyle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{SymbolHelper as e,slsDashToTemplateArray as t,CIMSymbolHelper as r}from\"./CIMSymbolHelper.js\";import a from\"./Rect.js\";import{getSDFInfo as i,buildSDF as n}from\"./SDFHelper.js\";import{resampleHermite as s}from\"./utils.js\";const o=512;class m{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(s,o,m){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),\"simple-fill\"===s.type||\"esriSFS\"===s.type){const[t,r,a]=e.rasterizeSimpleFill(this._rasterizationCanvas,s.style,o);return{size:[r,a],image:new Uint32Array(t.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if(\"simple-line\"===s.type||\"esriSLS\"===s.type||\"line\"===s.type&&s.dashTemplate){let r,a;if(\"simple-line\"===s.type||\"esriSLS\"===s.type)switch(r=t(s.style,s.cap),s.cap){case\"butt\":a=\"Butt\";break;case\"square\":a=\"Square\";break;default:a=\"Round\"}else r=s.dashTemplate,a=s.cim.capStyle;const[i,n,o]=e.rasterizeSimpleLine(r,a);return{size:[n,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let l,c,f;if(\"simple-marker\"===s.type||\"esriSMS\"===s.type||\"line-marker\"===s.type?(l=r.fromSimpleMarker(s),f=i(l)):s.cim&&\"CIMHatchFill\"===s.cim.type?(l=r.fromCIMHatchFill(s.cim),c=new a(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):s.cim.markerPlacement&&\"CIMMarkerPlacementInsidePolygon\"===s.cim.markerPlacement.type?(l=r.fromCIMInsidePolygon(s.cim),c=new a(l.frame.xmin,-l.frame.ymax,l.frame.xmax-l.frame.xmin,l.frame.ymax-l.frame.ymin)):(l=s.cim,f=i(l)),f&&!m){const[e,t,r]=n(f);return e?{size:[t,r],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[p,h,u,y,d]=r.rasterize(this._rasterizationCanvas,l,c,this._resourceManager,!m);return p?{size:[h,u],image:new Uint32Array(p.buffer),sdf:!1,simplePattern:!1,anchorX:y,anchorY:d}:null}rasterizeImageResource(e,t,r,a){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement(\"canvas\")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext(\"2d\");r instanceof ImageData?i.putImageData(r,0,0):(r.setAttribute(\"width\",`${e}px`),r.setAttribute(\"height\",`${t}px`),i.drawImage(r,0,0,e,t));const n=i.getImageData(0,0,e,t),m=new Uint8Array(n.data);if(a)for(const s of a)if(s&&s.oldColor&&4===s.oldColor.length&&s.newColor&&4===s.newColor.length){const[e,t,r,a]=s.oldColor,[i,n,o,l]=s.newColor;if(e===i&&t===n&&r===o&&a===l)continue;for(let s=0;s<m.length;s+=4)e===m[s]&&t===m[s+1]&&r===m[s+2]&&a===m[s+3]&&(m[s]=i,m[s+1]=n,m[s+2]=o,m[s+3]=l)}let l;for(let s=0;s<m.length;s+=4)l=m[s+3]/255,m[s]=m[s]*l,m[s+1]=m[s+1]*l,m[s+2]=m[s+2]*l;let c=m,f=e,p=t;const h=o;if(f>=h||p>=h){const r=f/p;r>1?(f=h,p=Math.round(h/r)):(p=h,f=Math.round(h*r)),c=new Uint8Array(4*f*p);const a=new Uint8ClampedArray(c.buffer);s(m,e,t,a,f,p,!1)}return{size:[f,p],image:new Uint32Array(c.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nconst n=new Float32Array(1),r=new Uint32Array(n.buffer);function t(n,r,t){return Math.round(Math.max(Math.min(n,t),r))}function u(n){return t(n,-128,127)}function e(n){return t(n,-32768,32767)}function o(n){return t(n,-2147483648,2147483647)}function f(n){return t(n,0,255)}function i(n){return t(n,0,65535)}function c(n){return t(n,0,4294967295)}function a(t){return n[0]=t,r[0]}function h(t){return r[0]=t,n[0]}function M(n){return[255&n,(65280&n)>>>8,(16711680&n)>>>16,(4278190080&n)>>>24]}function m(n,r){return 15&n|(15&r)<<4}function w(n,r){return 65535&n|r<<16}function x(n,r,t,u){return 255&n|(255&r)<<8|(255&t)<<16|u<<24}function y(n,r,t){return 255&n|(255&r)<<8|t<<16}function A(n){return 0|n}export{e as i16,w as i1616to32,o as i32,u as i8,y as i8816to32,x as i8888to32,A as numTo32,h as toFloat32,a as toUint32,i as u16,c as u32,M as u32to4Xu8,m as u4u4to8,f as u8};\n"],"names":["M","e","Legend","Preview","C","t","r","targetSize","i","Math","max","frame","xmax","xmin","ymax","ymin","referenceSize","scaleFactor","I","fill","legend","geometry","rings","canvasPaths","preview","stroke","paths","z","constructor","this","_spatialReference","_avoidSDF","_resourceCache","Map","_pictureMarkerCache","_textRasterizer","_cimResourceManager","_rasterizer","async","a","o","n","c","centroid","data","symbol","type","P","l","analyzeCIMSymbol","Object","keys","map","name","alias","x","attributes","rasterizeCIMSymbol","s","geometryType","spatialReference","fields","cim","push","fetchPictureMarkerResource","text","indexOf","textCase","Promise","all","materialHash","get","url","responseType","signal","set","_getRasterizedResource","anchorX","m","anchorY","h","f","g","offsetX","offsetY","rotation","rotateClockwise","angle","horizontalAlignment","verticalAlignment","rotateClockWise","rasterizedResource","getSymbolImage","document","createElement","getContext","length","size","y","u","p","d","sin","PI","cos","min","createImageData","Uint8ClampedArray","image","buffer","rasterizedImage","width","height","_imageDataToCanvas","save","translate","rotate","drawImage","restore","imageData","getImageData","anchorPosition","_imageDataCanvas","putImageData","_imageTo32Array","fillStyle","toHex","globalCompositeOperation","fillRect","Uint32Array","style","color","_getPictureResource","_rasterizePictureResource","analyzedCIM","hash","w","_embedCIMLayerInVectorMarker","markerPlacement","JSON","stringify","toString","path","rasterizeJSONResource","mosaicHash","_rasterizeTextResource","sdf","simplePattern","anchorPoint","preserveOutlineWidth","has","window","devicePixelRatio","fontName","weight","decoration","outlineColor","font","family","halo","outlineSize","pixelRatio","premultiplyColors","rasterizeText","createPattern","setTransform","m11","m12","m21","m22","m41","m42","strokeStyle","lineWidth","beginPath","moveTo","lineTo","closePath","apply","Uint8Array","markerGraphics","symbolLayers","materialOverrides","_resourceManager","dispose","_rasterizationCanvas","dashTemplate","cap","capStyle","rasterizeImageResource","ImageData","setAttribute","oldColor","newColor","round","Float32Array"],"sourceRoot":""}