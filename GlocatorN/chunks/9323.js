"use strict";(self.webpackChunkmomraGisCore=self.webpackChunkmomraGisCore||[]).push([[9323],{90331:(t,e,n)=>{function r(t){switch(t){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function o(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function c(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function s(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}n.d(e,{n1:()=>r,U:()=>c,B3:()=>o,Op:()=>s}),n(39994)},56215:(t,e,n)=>{n.d(e,{AR:()=>m,Gr:()=>h,JG:()=>u,Ue:()=>a,Jk:()=>g,zk:()=>f,al:()=>l,KU:()=>p,ct:()=>d});var r=n(19431),o=n(19480),c=n(6766),s=n(8909),i=n(68817);function a(t){return t?{origin:(0,s.a)(t.origin),vector:(0,s.a)(t.vector)}:{origin:(0,s.c)(),vector:(0,s.c)()}}function u(t,e=a()){return l(t.origin,t.vector,e)}function l(t,e,n=a()){return(0,c.g)(n.origin,t),(0,c.g)(n.vector,e),n}function f(t,e,n=a()){return(0,c.g)(n.origin,t),(0,c.f)(n.vector,e,t),n}function g(t,e){const n=(0,c.f)(i.WM.get(),e,t.origin),o=(0,c.d)(t.vector,n),s=(0,c.d)(t.vector,t.vector),a=(0,r.uZ)(o/s,0,1),u=(0,c.f)(i.WM.get(),(0,c.a)(i.WM.get(),t.vector,a),n);return(0,c.d)(u,u)}function p(t,e,n){return(0,c.b)(n,t.origin,(0,c.a)(n,t.vector,e))}function d(t,e,n,o,s){const{vector:a,origin:u}=t,l=(0,c.f)(i.WM.get(),e,u),f=(0,c.d)(a,l)/(0,c.p)(a);return(0,c.a)(s,a,(0,r.uZ)(f,n,o)),(0,c.b)(s,s,t.origin)}function h(t,e){if(w(t,function(t,e){const n=v.get();return n.origin=t,n.vector=e,n}(e.origin,e.direction),!1,b)){const{tA:e,pB:n,distance2:r}=b;if(e>=0&&e<=1)return r;if(e<0)return(0,c.h)(t.origin,n);if(e>1)return(0,c.h)((0,c.b)(i.WM.get(),t.origin,t.vector),n)}return null}function m(t,e,n){return!!w(t,e,!0,b)&&((0,c.g)(n,b.pA),!0)}function w(t,e,n,o){const s=1e-6,a=t.origin,u=(0,c.b)(i.WM.get(),a,t.vector),l=e.origin,f=(0,c.b)(i.WM.get(),l,e.vector),g=i.WM.get(),p=i.WM.get();if(g[0]=a[0]-l[0],g[1]=a[1]-l[1],g[2]=a[2]-l[2],p[0]=f[0]-l[0],p[1]=f[1]-l[1],p[2]=f[2]-l[2],Math.abs(p[0])<s&&Math.abs(p[1])<s&&Math.abs(p[2])<s)return!1;const d=i.WM.get();if(d[0]=u[0]-a[0],d[1]=u[1]-a[1],d[2]=u[2]-a[2],Math.abs(d[0])<s&&Math.abs(d[1])<s&&Math.abs(d[2])<s)return!1;const h=g[0]*p[0]+g[1]*p[1]+g[2]*p[2],m=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],w=g[0]*d[0]+g[1]*d[1]+g[2]*d[2],b=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],v=(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])*b-m*m;if(Math.abs(v)<s)return!1;let C=(h*m-w*b)/v,y=(h+m*C)/b;n&&(C=(0,r.uZ)(C,0,1),y=(0,r.uZ)(y,0,1));const x=i.WM.get(),M=i.WM.get();return x[0]=a[0]+C*d[0],x[1]=a[1]+C*d[1],x[2]=a[2]+C*d[2],M[0]=l[0]+y*p[0],M[1]=l[1]+y*p[1],M[2]=l[2]+y*p[2],o.tA=C,o.tB=y,o.pA=x,o.pB=M,o.distance2=(0,c.h)(x,M),!0}const b={tA:0,tB:0,pA:(0,s.c)(),pB:(0,s.c)(),distance2:0},v=new o.x((()=>({origin:null,vector:null})))},40216:(t,e,n)=>{n.r(e),n.d(e,{loadGLTFMesh:()=>S});var r=n(30936),o=n(66341),c=n(86114),s=n(61681),i=n(1662),a=n(34344),u=n(8909),l=n(1983),f=n(77727),g=n(1680),p=n(33206),d=n(124),h=n(81936),m=n(86717),w=n(56999),b=n(79),v=n(91780),C=n(91420),y=n(20016),x=n(1731),M=n(51701),A=n(14634),W=n(14789),B=n(32101),U=n(385);async function S(t,e,n){const i=new C.C(function(t){return null!=t&&t.resolveFile?{busy:!1,request:async(e,n,r)=>{const c=t.resolveFile(e),i="image"===n?"image":"binary"===n?"array-buffer":"json";return(await(0,o.default)(c,{responseType:i,signal:(0,s.pC)(r)?r.signal:null})).data}}:null}(n)),a=(await(0,y.z)(i,e,n,!0)).model,f=a.lods.shift(),m=new Map,w=new Map;a.textures.forEach(((t,e)=>m.set(e,function(t){return new p.Z({data:t.data,wrap:z(t.parameters.wrap)})}(t)))),a.materials.forEach(((t,e)=>w.set(e,function(t,e){const n=new r.Z(function(t,e){return(0,l.f)(E(t[0]),E(t[1]),E(t[2]),e)}(t.color,t.opacity)),o=t.emissiveFactor?new r.Z(function(t){return(0,u.f)(E(t[0]),E(t[1]),E(t[2]))}(t.emissiveFactor)):null;return new g.Z({color:n,colorTexture:(0,s.Wg)((0,s.yw)(t.textureColor,(t=>e.get(t)))),normalTexture:(0,s.Wg)((0,s.yw)(t.textureNormal,(t=>e.get(t)))),emissiveColor:o,emissiveTexture:(0,s.Wg)((0,s.yw)(t.textureEmissive,(t=>e.get(t)))),occlusionTexture:(0,s.Wg)((0,s.yw)(t.textureOcclusion,(t=>e.get(t)))),alphaMode:$(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:(0,s.Wg)((0,s.yw)(t.textureMetallicRoughness,(t=>e.get(t))))})}(t,m))));const x=function(t){let e=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,s=[];for(const i of t.parts){const{attributes:{position:t,normal:a,color:u,tangent:l,texCoord0:f}}=i,g=`\n      ${Z(t,r)}/\n      ${Z(a,r)}/\n      ${Z(u,r)}/\n      ${Z(l,r)}/\n      ${Z(f,r)}/\n      ${k(i.transform)}\n    `;let p=!1;const d=(0,c.s1)(o,g,(()=>(p=!0,{start:e,length:t.count})));p&&(e+=t.count),a&&(n.normal=!0),u&&(n.color=!0),l&&(n.tangent=!0),f&&(n.texCoord0=!0),s.push({gltf:i,writeVertices:p,region:d})}return{vertexAttributes:{position:(0,b.gS)(h.fP,e),normal:n.normal?(0,b.gS)(h.ct,e):null,tangent:n.tangent?(0,b.gS)(h.ek,e):null,color:n.color?(0,b.gS)(h.mc,e):null,texCoord0:n.texCoord0?(0,b.gS)(h.Eu,e):null},parts:s,components:[]}}(f);for(const t of x.parts)T(x,t,w);const{position:M,normal:A,tangent:W,color:B,texCoord0:U}=x.vertexAttributes,S={position:M.typedBuffer,normal:(0,s.pC)(A)?A.typedBuffer:null,tangent:(0,s.pC)(W)?W.typedBuffer:null,uv:(0,s.pC)(U)?U.typedBuffer:null,color:(0,s.pC)(B)?B.typedBuffer:null},F=(0,v.w1)(S,t,n);return{transform:F.transform,components:x.components,spatialReference:t.spatialReference,vertexAttributes:new d.ZP({position:F.vertexAttributes.position,normal:F.vertexAttributes.normal,tangent:F.vertexAttributes.tangent,color:S.color,uv:S.uv})}}function Z(t,e){if((0,s.Wi)(t))return"-";const n=t.typedBuffer;return`${(0,c.s1)(e,n.buffer,(()=>e.size))}/${n.byteOffset}/${n.byteLength}`}function k(t){return(0,s.pC)(t)?t.toString():"-"}function T(t,e,n){e.writeVertices&&function(t,e){const{position:n,normal:r,tangent:o,color:c,texCoord0:u}=t.vertexAttributes,l=e.region.start,{attributes:f,transform:g}=e.gltf,p=f.position.count;if((0,m.t)(n.slice(l,p),f.position,g),(0,s.pC)(f.normal)&&(0,s.pC)(r)){const t=(0,i.a)((0,a.c)(),g);(0,m.a)(r.slice(l,p),f.normal,t)}else(0,s.pC)(r)&&(0,W.f)(r,0,0,1,{dstIndex:l,count:p});if((0,s.pC)(f.tangent)&&(0,s.pC)(o)){const t=(0,i.a)((0,a.c)(),g);(0,w.t)(o.slice(l,p),f.tangent,t)}else(0,s.pC)(o)&&(0,B.f)(o,0,0,1,1,{dstIndex:l,count:p});if((0,s.pC)(f.texCoord0)&&(0,s.pC)(u)?(0,U.n)(u.slice(l,p),f.texCoord0):(0,s.pC)(u)&&(0,U.f)(u,0,0,{dstIndex:l,count:p}),(0,s.pC)(f.color)&&(0,s.pC)(c)){const t=f.color,e=c.slice(l,p);if(4===t.elementCount)t instanceof h.ek?(0,w.s)(e,t,255):t instanceof h.mc?(0,B.c)(e,t):t instanceof h.v6&&(0,w.a)(e,t,8);else{(0,B.f)(e,255,255,255,255);const n=h.ne.fromTypedArray(e.typedBuffer,e.typedBufferStride);t instanceof h.ct?(0,m.s)(n,t,255):t instanceof h.ne?(0,W.c)(n,t):t instanceof h.mw&&(0,m.b)(n,t,8)}}else(0,s.pC)(c)&&(0,B.f)(c.slice(l,p),255,255,255,255)}(t,e);const r=e.gltf,o=function(t,e){switch(e){case 4:return(0,x.nh)(t,M.DX);case 5:return(0,x.DA)(t);case 6:return(0,x.jX)(t)}}(r.indices||r.attributes.position.count,r.primitiveType),c=e.region.start;if(c)for(let t=0;t<o.length;t++)o[t]+=c;t.components.push(new f.Z({faces:o,material:n.get(r.material),trustSourceNormals:!0}))}function $(t){switch(t){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function z(t){return{horizontal:F(t.s),vertical:F(t.t)}}function F(t){switch(t){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function E(t){return t**(1/A.K)*255}},51701:(t,e,n)=>{n.d(e,{qZ:()=>m,NO:()=>h,cM:()=>d,p:()=>g,DX:()=>p});var r=n(6766),o=n(8909),c=n(19480),s=(n(55709),n(56215));n(68817),new c.x(s.Ue),new c.x((()=>({p0:null,p1:null,p2:null})));const i=(0,o.c)(),a=(0,o.c)();let u=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const l=new Uint16Array([0]),f=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function g(t){if(1===t)return l;if(t<f.length)return new Uint16Array(f.buffer,0,t);if(t>u.length){const e=Math.max(2*u.length,t);u=new Uint32Array(e);for(let t=0;t<u.length;t++)u[t]=t}return new Uint32Array(u.buffer,0,t)}function p(t){if(1===t)return new Uint16Array(l);if(t<f.length)return new Uint16Array(f.slice(0,t));if(t>u.length){const e=new Uint32Array(t);for(let t=0;t<e.length;t++)e[t]=t;return e}return new Uint32Array(u.slice(0,t))}function d(t,e,n){if(!t)return!1;const{size:o,data:c}=t;(0,r.s)(n,0,0,0),(0,r.s)(C,0,0,0);let s=0,u=0;for(let t=0;t<e.length-2;t+=3){const p=e[t+0]*o,d=e[t+1]*o,h=e[t+2]*o;(0,r.s)(w,c[p+0],c[p+1],c[p+2]),(0,r.s)(b,c[d+0],c[d+1],c[d+2]),(0,r.s)(v,c[h+0],c[h+1],c[h+2]);const m=(l=w,f=b,g=v,(0,r.f)(i,f,l),(0,r.f)(a,g,l),(0,r.l)((0,r.c)(i,i,a))/2);m?((0,r.b)(w,w,b),(0,r.b)(w,w,v),(0,r.a)(w,w,1/3*m),(0,r.b)(n,n,w),s+=m):((0,r.b)(C,C,w),(0,r.b)(C,C,b),(0,r.b)(C,C,v),u+=3)}var l,f,g;return!(0===u&&0===s||(0!==s?((0,r.a)(n,n,1/s),0):0===u||((0,r.a)(n,C,1/u),0)))}function h(t,e,n){if(!t||!e)return!1;const{size:o,data:c}=t;(0,r.s)(n,0,0,0);let s=-1,i=0;for(let t=0;t<e.length;t++){const r=e[t]*o;s!==r&&(n[0]+=c[r+0],n[1]+=c[r+1],n[2]+=c[r+2],i++),s=r}return i>1&&(0,r.a)(n,n,1/i),i>0}function m(t,e,n,o){if(!t)return!1;const{size:c,data:s}=t;(0,r.s)(o,0,0,0),(0,r.s)(C,0,0,0);let i=0,a=0;const u=e?e.length-1:s.length/c-1,l=u+(n?2:0);for(let t=0;t<l;t+=2){const n=t<u?t:u,l=t<u?t+1:0,f=(e?e[n]:n)*c,g=(e?e[l]:l)*c;w[0]=s[f+0],w[1]=s[f+1],w[2]=s[f+2],b[0]=s[g+0],b[1]=s[g+1],b[2]=s[g+2],(0,r.a)(w,(0,r.b)(w,w,b),.5);const p=(0,r.j)(w,b);p>0?((0,r.b)(o,o,(0,r.a)(w,w,p)),i+=p):((0,r.b)(C,C,w),a++)}return 0!==i?((0,r.a)(o,o,1/i),!0):0!==a&&((0,r.a)(o,C,1/a),!0)}const w=(0,o.c)(),b=(0,o.c)(),v=(0,o.c)(),C=(0,o.c)()}}]);
//# sourceMappingURL=9323.js.map