{"version":3,"file":"chunks/7251.js","mappings":"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","sources":["webpack://momraGisCore/./node_modules/@arcgis/core/chunks/DefaultMaterial.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/chunks/RealisticTree.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/chunks/vec32.js","webpack://momraGisCore/./node_modules/@arcgis/core/chunks/vec33.js","webpack://momraGisCore/./node_modules/@arcgis/core/geometry/support/buffer/math/common.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/layers/graphics/wosrLoader.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/layers/graphics/objectResourceUtils.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DecodeNormal.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/collections/Component/Material/shader/DecodeSymbolColor.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexPosition.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateMainLighting.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DoublePrecision.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/DefaultMaterialTechnique.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RealisticTreeTechnique.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/DefaultMaterial.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VertexNormal as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js\";import{VerticalOffset as g}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as m}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as v}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{ComputeNormalTexture as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ComputeNormalTexture.glsl.js\";import{EvaluateAmbientOcclusion as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{Normals as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Normals.glsl.js\";import{PhysicallyBasedRendering as x}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as y}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as C}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as L,DiscardOrAdjustAlpha as j}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{HeaderComment as M}from\"../views/3d/webgl-engine/core/shaderLibrary/util/HeaderComment.glsl.js\";import{MixExternalColor as T}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as E}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as O}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function P(P){const _=new O,S=_.vertex.code,$=_.fragment.code;return _.include(M,{name:\"Default Material Shader\",output:P.output}),_.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),_.include(t),_.varyings.add(\"vpos\",\"vec3\"),_.include(C,P),_.include(i,P),_.include(g,P),0!==P.output&&7!==P.output||(_.include(l,P),_.include(a,{linearDepth:!1}),0===P.normalType&&P.offsetBackfaces&&_.include(r),_.include(p,P),_.include(c,P),P.instancedColor&&_.attributes.add(\"instanceColor\",\"vec4\"),_.varyings.add(\"localvpos\",\"vec3\"),_.include(s,P),_.include(e,P),_.include(n,P),_.include(d,P),_.vertex.uniforms.add(\"externalColor\",\"vec4\"),_.varyings.add(\"vcolorExt\",\"vec4\"),P.multipassTerrainEnabled&&_.varyings.add(\"depth\",\"float\"),S.add(E`\n      void main(void) {\n        forwardNormalizedVertexColor();\n        vcolorExt = externalColor;\n        ${P.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n        vcolorExt *= vvColor();\n        vcolorExt *= getSymbolColor();\n        forwardColorMixMode();\n\n        if (vcolorExt.a < ${E.float(L)}) {\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n        }\n        else {\n          vpos = calculateVPos();\n          localvpos = vpos - view[3].xyz;\n          vpos = subtractOrigin(vpos);\n          ${0===P.normalType?E`\n          vNormalWorld = dpNormal(vvLocalNormal(normalModel()));`:\"\"}\n          vpos = addVerticalOffset(vpos, localOrigin);\n          ${P.vertexTangents?\"vTangent = dpTransformVertexTangent(tangent);\":\"\"}\n          gl_Position = transformPosition(proj, view, vpos);\n          ${0===P.normalType&&P.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n        }\n\n        ${P.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n        forwardLinearDepth();\n        forwardTextureCoordinates();\n      }\n    `)),7===P.output&&(_.include(o,P),_.include(j,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.fragment.include(T),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        ${P.attributeColor?E`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===P.output&&(_.include(o,P),_.include(b,P),_.include(u,P),_.include(j,P),P.receiveShadows&&_.include(y,P),P.multipassTerrainEnabled&&(_.fragment.include(v),_.include(h,P)),_.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),P.hasColorTexture&&_.fragment.uniforms.add(\"tex\",\"sampler2D\"),_.include(w,P),_.include(x,P),_.fragment.include(T),_.include(f,P),$.add(E`\n      void main() {\n        discardBySlice(vpos);\n        ${P.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        ${P.hasColorTexture?E`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${P.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:E`vec4 texColor = vec4(1.0);`}\n        shadingParams.viewDirection = normalize(vpos - camPos);\n        ${3===P.normalType?E`\n        vec3 normal = screenDerivativeNormal(localvpos);`:E`\n        shadingParams.normalView = vNormalWorld;\n        vec3 normal = shadingNormal(shadingParams);`}\n        ${1===P.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${P.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===P.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${P.attributeColor?E`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:E`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${P.hasNormalTexture?E`\n              mat3 tangentSpace = ${P.vertexTangents?\"computeTangentSpace(normal);\":\"computeTangentSpace(normal, vpos, vuv0);\"}\n              vec3 shadedNormal = computeTextureNormal(tangentSpace, vuv0);`:\"vec3 shadedNormal = normal;\"}\n        ${1===P.pbrMode||2===P.pbrMode?1===P.viewingMode?E`vec3 normalGround = normalize(vpos + localOrigin);`:E`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:E``}\n        ${1===P.pbrMode||2===P.pbrMode?E`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, shadingParams.viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${P.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),_.include(m,P),_}const _=Object.freeze({__proto__:null,build:P});export{_ as D,P as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{ForwardLinearDepth as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{Offset as o}from\"../views/3d/webgl-engine/core/shaderLibrary/Offset.glsl.js\";import{Slice as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{Transform as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{InstancedDoublePrecision as i}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{NormalAttribute as l}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js\";import{PositionAttribute as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/PositionAttribute.glsl.js\";import{SymbolColor as d}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/SymbolColor.glsl.js\";import{TextureCoordinateAttribute as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{VertexColor as s}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VertexColor.glsl.js\";import{VerticalOffset as c}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{DefaultMaterialAuxiliaryPasses as g}from\"../views/3d/webgl-engine/core/shaderLibrary/default/DefaultMaterialAuxiliaryPasses.glsl.js\";import{ReadLinearDepth as m}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{EvaluateAmbientOcclusion as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientOcclusion.glsl.js\";import{EvaluateSceneLighting as p}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateSceneLighting.glsl.js\";import{multipassTerrainTest as u}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{PhysicallyBasedRendering as b}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js\";import{PhysicallyBasedRenderingParameters as f}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{ReadShadowMap as h}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{VisualVariables as w}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js\";import{symbolAlphaCutoff as x,DiscardOrAdjustAlpha as y}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{MixExternalColor as C}from\"../views/3d/webgl-engine/core/shaderLibrary/util/MixExternalColor.glsl.js\";import{glsl as L}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as M}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";function j(j){const E=new M,O=E.vertex.code,_=E.fragment.code;return E.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\"),E.include(t),E.varyings.add(\"vpos\",\"vec3\"),E.include(w,j),E.include(i,j),E.include(c,j),0!==j.output&&7!==j.output||(E.include(l,j),E.include(a,{linearDepth:!1}),j.offsetBackfaces&&E.include(o),j.instancedColor&&E.attributes.add(\"instanceColor\",\"vec4\"),E.varyings.add(\"vNormalWorld\",\"vec3\"),E.varyings.add(\"localvpos\",\"vec3\"),j.multipassTerrainEnabled&&E.varyings.add(\"depth\",\"float\"),E.include(n,j),E.include(e,j),E.include(d,j),E.include(s,j),E.vertex.uniforms.add(\"externalColor\",\"vec4\"),E.varyings.add(\"vcolorExt\",\"vec4\"),O.add(L`\n        void main(void) {\n          forwardNormalizedVertexColor();\n          vcolorExt = externalColor;\n          ${j.instancedColor?\"vcolorExt *= instanceColor;\":\"\"}\n          vcolorExt *= vvColor();\n          vcolorExt *= getSymbolColor();\n          forwardColorMixMode();\n\n          if (vcolorExt.a < ${L.float(x)}) {\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          }\n          else {\n            vpos = calculateVPos();\n            localvpos = vpos - view[3].xyz;\n            vpos = subtractOrigin(vpos);\n            vNormalWorld = dpNormal(vvLocalNormal(normalModel()));\n            vpos = addVerticalOffset(vpos, localOrigin);\n            gl_Position = transformPosition(proj, view, vpos);\n            ${j.offsetBackfaces?\"gl_Position = offsetBackfacingClipPosition(gl_Position, vpos, vNormalWorld, camPos);\":\"\"}\n          }\n          ${j.multipassTerrainEnabled?L`depth = (view * vec4(vpos, 1.0)).z;`:\"\"}\n          forwardLinearDepth();\n          forwardTextureCoordinates();\n        }\n      `)),7===j.output&&(E.include(r,j),E.include(y,j),j.multipassTerrainEnabled&&(E.fragment.include(m),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        ${j.attributeColor?L`\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n\n        gl_FragColor = vec4(opacity_);\n      }\n    `)),0===j.output&&(E.include(r,j),E.include(p,j),E.include(v,j),E.include(y,j),j.receiveShadows&&E.include(h,j),j.multipassTerrainEnabled&&(E.fragment.include(m),E.include(u,j)),E.fragment.uniforms.add(\"camPos\",\"vec3\").add(\"localOrigin\",\"vec3\").add(\"ambient\",\"vec3\").add(\"diffuse\",\"vec3\").add(\"opacity\",\"float\").add(\"layerOpacity\",\"float\"),E.fragment.uniforms.add(\"view\",\"mat4\"),j.hasColorTexture&&E.fragment.uniforms.add(\"tex\",\"sampler2D\"),E.include(f,j),E.include(b,j),E.fragment.include(C),_.add(L`\n      void main() {\n        discardBySlice(vpos);\n        ${j.multipassTerrainEnabled?L`terrainDepthTest(gl_FragCoord, depth);`:\"\"}\n        ${j.hasColorTexture?L`\n        vec4 texColor = texture2D(tex, vuv0);\n        ${j.textureAlphaPremultiplied?\"texColor.rgb /= texColor.a;\":\"\"}\n        discardOrAdjustAlpha(texColor);`:L`vec4 texColor = vec4(1.0);`}\n        vec3 viewDirection = normalize(vpos - camPos);\n        ${1===j.pbrMode?\"applyPBRFactors();\":\"\"}\n        float ssao = evaluateAmbientOcclusionInverse();\n        ssao *= getBakedOcclusion();\n\n        float additionalAmbientScale = additionalDirectedAmbientLight(vpos + localOrigin);\n        vec3 additionalLight = ssao * lightingMainIntensity * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor;\n        ${j.receiveShadows?\"float shadow = readShadowMap(vpos, linearDepth);\":1===j.viewingMode?\"float shadow = lightingGlobalFactor * (1.0 - additionalAmbientScale);\":\"float shadow = 0.0;\"}\n        vec3 matColor = max(ambient, diffuse);\n        ${j.attributeColor?L`\n        vec3 albedo_ = mixExternalColor(vColor.rgb * matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(vColor.a * opacity, texColor.a, vcolorExt.a, int(colorMixMode));`:L`\n        vec3 albedo_ = mixExternalColor(matColor, texColor.rgb, vcolorExt.rgb, int(colorMixMode));\n        float opacity_ = layerOpacity * mixExternalOpacity(opacity, texColor.a, vcolorExt.a, int(colorMixMode));\n        `}\n        ${L`\n        vec3 shadedNormal = normalize(vNormalWorld);\n        albedo_ *= 1.2;\n        vec3 viewForward = vec3(view[0][2], view[1][2], view[2][2]);\n        float alignmentLightView = clamp(dot(viewForward, -lightingMainDirection), 0.0, 1.0);\n        float transmittance = 1.0 - clamp(dot(viewForward, shadedNormal), 0.0, 1.0);\n        float treeRadialFalloff = vColor.r;\n        float backLightFactor = 0.5 * treeRadialFalloff * alignmentLightView * transmittance * (1.0 - shadow);\n        additionalLight += backLightFactor * lightingMainIntensity;`}\n        ${1===j.pbrMode||2===j.pbrMode?1===j.viewingMode?L`vec3 normalGround = normalize(vpos + localOrigin);`:L`vec3 normalGround = vec3(0.0, 0.0, 1.0);`:L``}\n        ${1===j.pbrMode||2===j.pbrMode?L`\n            float additionalAmbientIrradiance = additionalAmbientIrradianceFactor * lightingMainIntensity[2];\n            vec3 shadedColor = evaluateSceneLightingPBR(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight, viewDirection, normalGround, mrr, emission, additionalAmbientIrradiance);`:\"vec3 shadedColor = evaluateSceneLighting(shadedNormal, albedo_, shadow, 1.0 - ssao, additionalLight);\"}\n        gl_FragColor = highlightSlice(vec4(shadedColor, opacity_), vpos);\n        ${j.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),E.include(g,j),E}const E=Object.freeze({__proto__:null,build:j});export{E as R,j as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{logger as t}from\"../geometry/support/buffer/math/common.js\";function e(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[4],c=r[5],i=r[6],a=r[8],p=r[9],y=r[10],B=r[12],m=r[13],h=r[14],l=e.typedBuffer,S=e.typedBufferStride,b=f.typedBuffer,M=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*S,f=t*M,r=b[f],o=b[f+1],v=b[f+2];l[e]=n*r+s*o+a*v+B,l[e+1]=u*r+c*o+p*v+m,l[e+2]=d*r+i*o+y*v+h}}function f(e,f,r){if(e.count!==f.count)return void t.error(\"source and destination buffers need to have the same number of elements\");const o=e.count,n=r[0],u=r[1],d=r[2],s=r[3],c=r[4],i=r[5],a=r[6],p=r[7],y=r[8],B=e.typedBuffer,m=e.typedBufferStride,h=f.typedBuffer,l=f.typedBufferStride;for(let t=0;t<o;t++){const e=t*m,f=t*l,r=h[f],o=h[f+1],S=h[f+2];B[e]=n*r+s*o+a*S,B[e+1]=u*r+c*o+p*S,B[e+2]=d*r+i*o+y*S}}function r(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=f*u[e],o[t+1]=f*u[e+1],o[t+2]=f*u[e+2]}}function o(t,e){const f=Math.min(t.count,e.count),r=t.typedBuffer,o=t.typedBufferStride,n=e.typedBuffer,u=e.typedBufferStride;for(let d=0;d<f;d++){const t=d*o,e=d*u,f=n[e],s=n[e+1],c=n[e+2],i=Math.sqrt(f*f+s*s+c*c);if(i>0){const e=1/i;r[t]=e*f,r[t+1]=e*s,r[t+2]=e*c}}}function n(t,e,f){const r=Math.min(t.count,e.count),o=t.typedBuffer,n=t.typedBufferStride,u=e.typedBuffer,d=e.typedBufferStride;for(let s=0;s<r;s++){const t=s*n,e=s*d;o[t]=u[e]>>f,o[t+1]=u[e+1]>>f,o[t+2]=u[e+2]>>f}}const u=Object.freeze({__proto__:null,transformMat4:e,transformMat3:f,scale:r,normalize:o,shiftRight:n});export{f as a,n as b,o as n,r as s,e as t,u as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nfunction e(e,t,n){const d=e.typedBuffer,f=e.typedBufferStride,o=t.typedBuffer,r=t.typedBufferStride,u=n?n.count:t.count;let l=(n&&n.dstIndex?n.dstIndex:0)*f,c=(n&&n.srcIndex?n.srcIndex:0)*r;for(let s=0;s<u;++s)d[l]=o[c],d[l+1]=o[c+1],d[l+2]=o[c+2],l+=f,c+=r}function t(e,t,n,d,f){var o,r;const u=e.typedBuffer,l=e.typedBufferStride,c=null!=(o=null==f?void 0:f.count)?o:e.count;let s=(null!=(r=null==f?void 0:f.dstIndex)?r:0)*l;for(let p=0;p<c;++p)u[s]=t,u[s+1]=n,u[s+2]=d,s+=l}const n=Object.freeze({__proto__:null,copy:e,fill:t});export{e as c,t as f,n as v};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport r from\"../../../../core/Logger.js\";const e=r.getLogger(\"esri.views.3d.support.buffer.math\");export{e as logger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{result as t}from\"../../../../core/asyncUtils.js\";import r from\"../../../../core/Error.js\";import n from\"../../../../core/Logger.js\";import{isSome as a,unwrap as s}from\"../../../../core/maybe.js\";import{throwIfAbortError as o}from\"../../../../core/promiseUtils.js\";import{Version as i}from\"../../../../core/Version.js\";import{d as u}from\"../../../../chunks/vec3f64.js\";import{empty as l,expandWithVec3 as c}from\"../../../../geometry/support/aaBoundingBox.js\";import{requestImage as p}from\"../../../../support/requestImageUtils.js\";import{Geometry as m}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as f}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as d}from\"../../webgl-engine/materials/DefaultMaterial.js\";const y=n.getLogger(\"esri.views.3d.layers.graphics.objectResourceUtils\");async function x(e,t){const r=await g(e,t);return{resource:r,textures:await A(r.textureDefinitions,t)}}async function g(r,n){const i=a(n)&&n.streamDataRequester;if(i)return h(r,i,n);const u=await t(e(r,s(n)));if(!0===u.ok)return u.value.data;o(u.error),w(u.error)}async function h(e,r,n){const a=await t(r.request(e,\"json\",n));if(!0===a.ok)return a.value;o(a.error),w(a.error.details.url)}function w(e){throw new r(\"\",`Request for object resource failed: ${e}`)}function v(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||(y.warn(\"Geometry must specify vertex attributes\"),n=!1),t.topology){case\"PerAttributeArray\":break;case\"Indexed\":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t&&t.values?(null!=t.valueType&&\"UInt32\"!==t.valueType&&(y.warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&(y.warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):(y.warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else y.warn(\"Indexed geometries must specify faces\"),n=!1;break}default:y.warn(`Unsupported topology '${r}'`),n=!1}e.params.material||(y.warn(\"Geometry requires material\"),n=!1);const a=e.params.vertexAttributes;for(const s in a){a[s].values||(y.warn(\"Geometries with externally defined attributes are not yet supported\"),n=!1)}return n}function b(e,t){const r=[],n=[],s=[],o=[],l=e.resource,c=i.parse(l.version||\"1.0\",\"wosr\");I.validate(c);const p=l.model.name,y=l.model.geometries,x=l.materialDefinitions,g=e.textures;let h=0;const w=new Map;for(let i=0;i<y.length;i++){const e=y[i];if(!v(e))continue;const l=M(e),c=e.params.vertexAttributes,p=[];for(const t in c){const e=c[t],r=e.values;p.push([t,{data:r,size:e.valuesPerElement,exclusive:!0}])}const b=[];if(\"PerAttributeArray\"!==e.params.topology){const t=e.params.faces;for(const e in t)b.push([e,new Uint32Array(t[e].values)])}const j=g&&g[l.texture];if(j&&!w.has(l.texture)){const{image:e,params:t}=j,r=new f(e,t);o.push(r),w.set(l.texture,r)}const A=w.get(l.texture),I=A?A.id:void 0;let P=s[l.material]?s[l.material][l.texture]:null;if(!P){const e=x[l.material.substring(l.material.lastIndexOf(\"/\")+1)].params;1===e.transparency&&(e.transparency=0);const r=j&&j.alphaChannelUsage,n=e.transparency>0||\"transparency\"===r||\"maskAndTransparency\"===r,o=j?U(j.alphaChannelUsage):void 0,i={ambient:u(e.diffuse),diffuse:u(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:I,initTextureTransparent:!0,doubleSided:!0,cullFace:0,colorMixMode:e.externalColorMixMode||\"tint\",textureAlphaPremultiplied:!!j&&!!j.params.preMultiplyAlpha};a(t)&&t.materialParamsMixin&&Object.assign(i,t.materialParamsMixin),P=new d(i),s[l.material]||(s[l.material]={}),s[l.material][l.texture]=P}n.push(P);const T=new m(p,b);h+=b.position?b.position.length:0,r.push(T)}return{name:p,stageResources:{textures:o,materials:n,geometries:r},pivotOffset:l.model.pivotOffset,boundingBox:j(r),numberOfVertices:h,lodThreshold:null}}function j(e){const t=l();return e.forEach((e=>{const r=e.boundingInfo;a(r)&&(c(t,r.getBBMin()),c(t,r.getBBMax()))})),t}async function A(e,t){const r=[];for(const o in e){const n=e[o],s=n.images[0].data;if(!s){y.warn(\"Externally referenced texture data is not yet supported\");continue}const i=n.encoding+\";base64,\"+s,u=\"/textureDefinitions/\"+o,l=\"rgba\"===n.channels?n.alphaChannelUsage||\"transparency\":\"none\",c={noUnpackFlip:!0,wrap:{s:10497,t:10497},preMultiplyAlpha:1!==U(l)},m=a(t)&&t.disableTextures?Promise.resolve(null):p(i,t);r.push(m.then((e=>({refId:u,image:e,params:c,alphaChannelUsage:l}))))}const n=await Promise.all(r),s={};for(const a of n)s[a.refId]=a;return s}function U(e){switch(e){case\"mask\":return 2;case\"maskAndTransparency\":return 3;case\"none\":return 1;default:return 0}}function M(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const I=new i(1,2,\"wosr\");export{A as createTextureResources,x as load,b as processLoadResult};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{adjustStaticAGOUrl as e}from\"../../../../core/devEnvironmentUtils.js\";import{get as t,isSome as r,isNone as s}from\"../../../../core/maybe.js\";import{a as o}from\"../../../../chunks/mat3.js\";import{c as i}from\"../../../../chunks/mat3f64.js\";import{b as a}from\"../../../../chunks/mat4.js\";import{c as u}from\"../../../../chunks/mat4f64.js\";import{m as n,f as l,E as c,l as m,n as d,e as f}from\"../../../../chunks/vec3.js\";import{c as p}from\"../../../../chunks/vec3f64.js\";import{empty as x,expandWithVec3 as g}from\"../../../../geometry/support/aaBoundingBox.js\";import{BufferViewVec3f as h,BufferViewVec4f as b,BufferViewVec2f as v,BufferViewVec4u8 as R,BufferViewVec4u16 as y,BufferViewVec3u8 as B,BufferViewVec3u16 as M}from\"../../../../geometry/support/buffer/BufferView.js\";import{t as w,a as j,s as C}from\"../../../../chunks/vec32.js\";import{t as E,s as T}from\"../../../../chunks/vec42.js\";import{createBuffer as S}from\"../../../../geometry/support/buffer/utils.js\";import{DefaultLoadingContext as O}from\"../../glTF/DefaultLoadingContext.js\";import{load as F}from\"../../glTF/loader.js\";import{triangleFanToTriangles as A,triangleStripToTriangles as I,trianglesToTriangles as k}from\"../../glTF/internal/indexUtils.js\";import{load as L,processLoadResult as N}from\"./wosrLoader.js\";import{Geometry as P}from\"../../webgl-engine/lib/Geometry.js\";import{Texture as _}from\"../../webgl-engine/lib/Texture.js\";import{DefaultMaterial as z}from\"../../webgl-engine/materials/DefaultMaterial.js\";import{COLOR_GAMMA as D}from\"../../webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{n as V}from\"../../../../chunks/vec22.js\";import{c as W,f as G}from\"../../../../chunks/vec43.js\";import{c as U}from\"../../../../chunks/vec33.js\";async function $(s,o){const i=q(e(s));if(\"wosr\"===i.fileType){const e=await(o.cache?o.cache.loadWOSR(i.url,o):L(i.url,o)),t=N(e,o);return{lods:[t],referenceBoundingBox:t.boundingBox,isEsriSymbolResource:!1,isWosr:!0,remove:e.remove}}const a=await(o.cache?o.cache.loadGLTF(i.url,o,o.usePBR):F(new O(o.streamDataRequester),i.url,o,o.usePBR)),u=t(a.model.meta,\"ESRI_proxyEllipsoid\");a.meta.isEsriSymbolResource&&r(u)&&-1!==a.meta.uri.indexOf(\"/RealisticTrees/\")&&J(a,u);const n=a.meta.isEsriSymbolResource?{usePBR:o.usePBR,isSchematic:!1,treeRendering:a.customMeta.esriTreeRendering,mrrFactors:[0,1,.2]}:{usePBR:o.usePBR,isSchematic:!1,mrrFactors:[0,1,.5]},l={...o.materialParamsMixin,treeRendering:a.customMeta.esriTreeRendering};if(null!=i.specifiedLodIndex){const e=K(a,n,l,i.specifiedLodIndex);let t=e[0].boundingBox;if(0!==i.specifiedLodIndex){t=K(a,n,l,0)[0].boundingBox}return{lods:e,referenceBoundingBox:t,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}const c=K(a,n,l);return{lods:c,referenceBoundingBox:c[0].boundingBox,isEsriSymbolResource:a.meta.isEsriSymbolResource,isWosr:!1,remove:a.remove}}function q(e){const t=e.match(/(.*\\.(gltf|glb))(\\?lod=([0-9]+))?$/);if(t)return{fileType:\"gltf\",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null};return e.match(/(.*\\.(json|json\\.gz))$/)?{fileType:\"wosr\",url:e,specifiedLodIndex:null}:{fileType:\"unknown\",url:e,specifiedLodIndex:null}}function K(e,t,s,a){const u=e.model,n=i(),l=new Array,c=new Map,m=new Map;return u.lods.forEach(((e,i)=>{if(void 0!==a&&i!==a)return;const d={name:e.name,stageResources:{textures:new Array,materials:new Array,geometries:new Array},lodThreshold:r(e.lodThreshold)?e.lodThreshold:null,pivotOffset:[0,0,0],numberOfVertices:0,boundingBox:x()};l.push(d),e.parts.forEach((e=>{const i=e.material+(e.attributes.normal?\"_normal\":\"\")+(e.attributes.color?\"_color\":\"\")+(e.attributes.texCoord0?\"_texCoord0\":\"\")+(e.attributes.tangent?\"_tangent\":\"\"),a=u.materials.get(e.material),l=r(e.attributes.texCoord0),f=r(e.attributes.normal),p=Q(a.alphaMode);if(!c.has(i)){if(l){if(r(a.textureColor)&&!m.has(a.textureColor)){const e=u.textures.get(a.textureColor),t={...e.parameters,preMultiplyAlpha:1!==p};m.set(a.textureColor,new _(e.data,t))}if(r(a.textureNormal)&&!m.has(a.textureNormal)){const e=u.textures.get(a.textureNormal);m.set(a.textureNormal,new _(e.data,e.parameters))}if(r(a.textureOcclusion)&&!m.has(a.textureOcclusion)){const e=u.textures.get(a.textureOcclusion);m.set(a.textureOcclusion,new _(e.data,e.parameters))}if(r(a.textureEmissive)&&!m.has(a.textureEmissive)){const e=u.textures.get(a.textureEmissive);m.set(a.textureEmissive,new _(e.data,e.parameters))}if(r(a.textureMetallicRoughness)&&!m.has(a.textureMetallicRoughness)){const e=u.textures.get(a.textureMetallicRoughness);m.set(a.textureMetallicRoughness,new _(e.data,e.parameters))}}const o=a.color[0]**(1/D),n=a.color[1]**(1/D),d=a.color[2]**(1/D),x=a.emissiveFactor[0]**(1/D),g=a.emissiveFactor[1]**(1/D),h=a.emissiveFactor[2]**(1/D),b=r(a.textureColor)&&l?m.get(a.textureColor):null;c.set(i,new z({...t,transparent:0===p,textureAlphaMode:p,textureAlphaCutoff:a.alphaCutoff,diffuse:[o,n,d],ambient:[o,n,d],opacity:a.opacity,doubleSided:a.doubleSided,doubleSidedType:\"winding-order\",cullFace:a.doubleSided?0:2,vertexColors:!!e.attributes.color,vertexTangents:!!e.attributes.tangent,normals:f?\"default\":\"screenDerivative\",castShadows:!0,receiveSSAO:!0,textureId:r(b)?b.id:void 0,colorMixMode:a.colorMixMode,normalTextureId:r(a.textureNormal)&&l?m.get(a.textureNormal).id:void 0,textureAlphaPremultiplied:r(b)&&!!b.params.preMultiplyAlpha,occlusionTextureId:r(a.textureOcclusion)&&l?m.get(a.textureOcclusion).id:void 0,emissiveTextureId:r(a.textureEmissive)&&l?m.get(a.textureEmissive).id:void 0,metallicRoughnessTextureId:r(a.textureMetallicRoughness)&&l?m.get(a.textureMetallicRoughness).id:void 0,emissiveFactor:[x,g,h],mrrFactors:[a.metallicFactor,a.roughnessFactor,t.mrrFactors[2]],isSchematic:!1,...s}))}const x=H(e.indices||e.attributes.position.count,e.primitiveType),O=e.attributes.position.count,F=S(h,O);w(F,e.attributes.position,e.transform);const A=[[\"position\",{data:F.typedBuffer,size:F.elementCount,exclusive:!0}]],I=[[\"position\",x]];if(r(e.attributes.normal)){const t=S(h,O);o(n,e.transform),j(t,e.attributes.normal,n),A.push([\"normal\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"normal\",x])}if(r(e.attributes.tangent)){const t=S(b,O);o(n,e.transform),E(t,e.attributes.tangent,n),A.push([\"tangent\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"tangent\",x])}if(r(e.attributes.texCoord0)){const t=S(v,O);V(t,e.attributes.texCoord0),A.push([\"uv0\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"uv0\",x])}if(r(e.attributes.color)){const t=S(R,O);if(4===e.attributes.color.elementCount)e.attributes.color instanceof b?T(t,e.attributes.color,255):e.attributes.color instanceof R?W(t,e.attributes.color):e.attributes.color instanceof y&&T(t,e.attributes.color,1/256);else{G(t,255,255,255,255);const r=new B(t.buffer,0,4);e.attributes.color instanceof h?C(r,e.attributes.color,255):e.attributes.color instanceof B?U(r,e.attributes.color):e.attributes.color instanceof M&&C(r,e.attributes.color,1/256)}A.push([\"color\",{data:t.typedBuffer,size:t.elementCount,exclusive:!0}]),I.push([\"color\",x])}const k=new P(A,I);d.stageResources.geometries.push(k),d.stageResources.materials.push(c.get(i)),l&&(r(a.textureColor)&&d.stageResources.textures.push(m.get(a.textureColor)),r(a.textureNormal)&&d.stageResources.textures.push(m.get(a.textureNormal)),r(a.textureOcclusion)&&d.stageResources.textures.push(m.get(a.textureOcclusion)),r(a.textureEmissive)&&d.stageResources.textures.push(m.get(a.textureEmissive)),r(a.textureMetallicRoughness)&&d.stageResources.textures.push(m.get(a.textureMetallicRoughness))),d.numberOfVertices+=O;const L=k.boundingInfo;r(L)&&(g(d.boundingBox,L.getBBMin()),g(d.boundingBox,L.getBBMax()))}))})),l}function Q(e){switch(e){case\"BLEND\":return 0;case\"MASK\":return 2;case\"OPAQUE\":case null:case void 0:return 1}}function H(e,t){switch(t){case 4:return k(e);case 5:return I(e);case 6:return A(e)}}function J(e,t){for(let r=0;r<e.model.lods.length;++r){const o=e.model.lods[r];e.customMeta.esriTreeRendering=!0;for(const i of o.parts){const o=i.attributes.normal;if(s(o))return;const x=i.attributes.position,g=x.count,b=p(),v=p(),y=p(),B=S(R,g),M=S(h,g),w=a(u(),i.transform);for(let s=0;s<g;s++){x.getVec(s,v),o.getVec(s,b),n(v,v,i.transform),l(y,v,t.center),c(y,y,t.radius);const a=y[2],u=m(y),p=Math.min(.45+.55*u*u,1);c(y,y,t.radius),n(y,y,w),d(y,y),r+1!==e.model.lods.length&&e.model.lods.length>1&&f(y,y,b,a>-1?.2:Math.min(-4*a-3.8,1)),M.setVec(s,y),B.set(s,0,255*p),B.set(s,1,255*p),B.set(s,2,255*p),B.set(s,3,255)}i.attributes.normal=M,i.attributes.color=B}}}export{$ as fetch,K as gltfToEngineResources,q as parseUrl};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../shaderModules/interfaces.js\";function e(e){e.vertex.code.add(o`vec4 offsetBackfacingClipPosition(vec4 posClip, vec3 posWorld, vec3 normalWorld, vec3 camPosWorld) {\nvec3 camToVert = posWorld - camPosWorld;\nbool isBackface = dot(camToVert, normalWorld) > 0.0;\nif (isBackface) {\nposClip.z += 0.0000003 * posClip.w;\n}\nreturn posClip;\n}`)}export{e as Offset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../../chunks/vec3f64.js\";import{DoublePrecision as i}from\"../util/DoublePrecision.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{encodeDoubleArraySplit as n}from\"../../../../../webgl/doublePrecisionUtils.js\";function o(e,n){n.instanced&&n.instancedDoublePrecision&&(e.attributes.add(\"modelOriginHi\",\"vec3\"),e.attributes.add(\"modelOriginLo\",\"vec3\"),e.attributes.add(\"model\",\"mat3\"),e.attributes.add(\"modelNormal\",\"mat3\")),n.instancedDoublePrecision&&(e.vertex.include(i,n),e.vertex.uniforms.add(\"viewOriginHi\",\"vec3\"),e.vertex.uniforms.add(\"viewOriginLo\",\"vec3\"));const o=[r`\n    vec3 calculateVPos() {\n      ${n.instancedDoublePrecision?\"return model * localPosition().xyz;\":\"return localPosition().xyz;\"}\n    }\n    `,r`\n    vec3 subtractOrigin(vec3 _pos) {\n      ${n.instancedDoublePrecision?r`\n          vec3 originDelta = dpAdd(viewOriginHi, viewOriginLo, -modelOriginHi, -modelOriginLo);\n          return _pos - originDelta;`:\"return vpos;\"}\n    }\n    `,r`\n    vec3 dpNormal(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize(modelNormal * _normal.xyz);\":\"return normalize(_normal.xyz);\"}\n    }\n    `,r`\n    vec3 dpNormalView(vec4 _normal) {\n      ${n.instancedDoublePrecision?\"return normalize((viewNormal * vec4(modelNormal * _normal.xyz, 1.0)).xyz);\":\"return normalize((viewNormal * _normal).xyz);\"}\n    }\n    `,n.vertexTangents?r`\n    vec4 dpTransformVertexTangent(vec4 _tangent) {\n      ${n.instancedDoublePrecision?\"return vec4(modelNormal * _tangent.xyz, _tangent.w);\":\"return _tangent;\"}\n\n    }\n    `:r``];e.vertex.code.add(o[0]),e.vertex.code.add(o[1]),e.vertex.code.add(o[2]),2===n.output&&e.vertex.code.add(o[3]),e.vertex.code.add(o[4])}!function(e){class i{}function r(e,i){n(i,t,a,3),e.setUniform3fv(\"viewOriginHi\",t),e.setUniform3fv(\"viewOriginLo\",a)}e.Uniforms=i,e.bindCustomOrigin=r}(o||(o={}));const t=e(),a=e();export{o as InstancedDoublePrecision};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){const d=e`vec3 decodeNormal(vec2 f) {\nfloat z = 1.0 - abs(f.x) - abs(f.y);\nreturn vec3(f + sign(f) * min(z, 0.0), z);\n}`;o.fragment.code.add(d),o.vertex.code.add(d)}export{o as DecodeNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{DecodeNormal as e}from\"../util/DecodeNormal.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o,d){0===d.normalType&&(o.attributes.add(\"normal\",\"vec3\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`)),1===d.normalType&&(o.include(e),o.attributes.add(\"normalCompressed\",\"vec2\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn decodeNormal(normalCompressed);\n}`)),3===d.normalType&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`))}export{o as NormalAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){o.attributes.add(\"position\",\"vec3\"),o.vertex.code.add(e`vec3 positionModel() { return position; }`)}export{o as PositionAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../../../core/shaderModules/interfaces.js\";function l(l){l.vertex.code.add(o`\n    vec4 decodeSymbolColor(vec4 symbolColor, out int colorMixMode) {\n      float symbolAlpha = 0.0;\n\n      const float maxTint = 85.0;\n      const float maxReplace = 170.0;\n      const float scaleAlpha = 3.0;\n\n      if (symbolColor.a > maxReplace) {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxReplace);\n      } else if (symbolColor.a > maxTint) {\n        colorMixMode = ${o.int(3)};\n        symbolAlpha = scaleAlpha * (symbolColor.a - maxTint);\n      } else if (symbolColor.a > 0.0) {\n        colorMixMode = ${o.int(4)};\n        symbolAlpha = scaleAlpha * symbolColor.a;\n      } else {\n        colorMixMode = ${o.int(1)};\n        symbolAlpha = 0.0;\n      }\n\n      return vec4(symbolColor.r, symbolColor.g, symbolColor.b, symbolAlpha);\n    }\n  `)}export{l as DecodeSymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{DecodeSymbolColor as o}from\"../../../collections/Component/Material/shader/DecodeSymbolColor.glsl.js\";import{glsl as e}from\"../../shaderModules/interfaces.js\";function r(r,l){l.symbolColor?(r.include(o),r.attributes.add(\"symbolColor\",\"vec4\"),r.varyings.add(\"colorMixMode\",\"mediump float\")):r.fragment.uniforms.add(\"colorMixMode\",\"int\"),l.symbolColor?r.vertex.code.add(e`int symbolColorMixMode;\nvec4 getSymbolColor() {\nreturn decodeSymbolColor(symbolColor, symbolColorMixMode) * 0.003921568627451;\n}\nvoid forwardColorMixMode() {\ncolorMixMode = float(symbolColorMixMode) + 0.5;\n}`):r.vertex.code.add(e`vec4 getSymbolColor() { return vec4(1.0); }\nvoid forwardColorMixMode() {}`)}export{r as SymbolColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t,d){1===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`)),2===d.attributeTextureCoordinates&&(t.attributes.add(\"uv0\",\"vec2\"),t.varyings.add(\"vuv0\",\"vec2\"),t.attributes.add(\"uvRegion\",\"vec4\"),t.varyings.add(\"vuvRegion\",\"vec4\"),t.vertex.code.add(e`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`)),0===d.attributeTextureCoordinates&&t.vertex.code.add(e`void forwardTextureCoordinates() {}`)}export{t as TextureCoordinateAttribute};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as o}from\"../../../../../../chunks/mat3f64.js\";import{c as r}from\"../../../../../../chunks/mat4f64.js\";import{c as e}from\"../../../../../../chunks/vec3f64.js\";import{PositionAttribute as i}from\"./PositionAttribute.glsl.js\";import{DoublePrecision as m}from\"../util/DoublePrecision.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function d(o,r){o.include(i),o.vertex.include(m,r),o.varyings.add(\"vPositionWorldCameraRelative\",\"vec3\"),o.varyings.add(\"vPosition_view\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromModel_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TH\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.vertex.uniforms.add(\"uTransform_ViewFromCameraRelative_RS\",\"mat3\"),o.vertex.uniforms.add(\"uTransform_ProjFromView\",\"mat4\"),o.vertex.code.add(a`vec3 positionWorldCameraRelative() {\nvec3 rotatedModelPosition = uTransform_WorldFromModel_RS * positionModel();\nvec3 transform_CameraRelativeFromModel = dpAdd(\nuTransform_WorldFromModel_TL,\nuTransform_WorldFromModel_TH,\n-uTransform_WorldFromView_TL,\n-uTransform_WorldFromView_TH\n);\nreturn transform_CameraRelativeFromModel + rotatedModelPosition;\n}\nvec3 position_view() {\nreturn uTransform_ViewFromCameraRelative_RS * positionWorldCameraRelative();\n}\nvoid forwardPosition() {\nvPositionWorldCameraRelative = positionWorldCameraRelative();\nvPosition_view = position_view();\ngl_Position = uTransform_ProjFromView * vec4(vPosition_view, 1.0);\n}\nvec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`),o.fragment.uniforms.add(\"uTransform_WorldFromView_TL\",\"vec3\"),o.fragment.code.add(a`vec3 positionWorld() {\nreturn uTransform_WorldFromView_TL + vPositionWorldCameraRelative;\n}`)}!function(i){class m{constructor(){this.worldFromModel_RS=o(),this.worldFromModel_TH=e(),this.worldFromModel_TL=e()}}i.ModelTransform=m;class a{constructor(){this.worldFromView_TH=e(),this.worldFromView_TL=e(),this.viewFromCameraRelative_RS=o(),this.projFromView=r()}}function d(o,r){o.setUniformMatrix3fv(\"uTransform_WorldFromModel_RS\",r.worldFromModel_RS),o.setUniform3fv(\"uTransform_WorldFromModel_TH\",r.worldFromModel_TH),o.setUniform3fv(\"uTransform_WorldFromModel_TL\",r.worldFromModel_TL)}function s(o,r){o.setUniform3fv(\"uTransform_WorldFromView_TH\",r.worldFromView_TH),o.setUniform3fv(\"uTransform_WorldFromView_TL\",r.worldFromView_TL),o.setUniformMatrix4fv(\"uTransform_ProjFromView\",r.projFromView),o.setUniformMatrix3fv(\"uTransform_ViewFromCameraRelative_RS\",r.viewFromCameraRelative_RS)}i.ViewProjectionTransform=a,i.bindModelTransform=d,i.bindViewProjTransform=s}(d||(d={}));export{d as VertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{NormalAttribute as o}from\"./NormalAttribute.glsl.js\";import{VertexPosition as r}from\"./VertexPosition.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function l(l,e){0===e.normalType||1===e.normalType?(l.include(o,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.varyings.add(\"vNormalView\",\"vec3\"),l.vertex.uniforms.add(\"uTransformNormal_GlobalFromModel\",\"mat3\"),l.vertex.uniforms.add(\"uTransformNormal_ViewFromGlobal\",\"mat3\"),l.vertex.code.add(a`void forwardNormal() {\nvNormalWorld = uTransformNormal_GlobalFromModel * normalModel();\nvNormalView = uTransformNormal_ViewFromGlobal * vNormalWorld;\n}`)):2===e.normalType?(l.include(r,e),l.varyings.add(\"vNormalWorld\",\"vec3\"),l.vertex.code.add(a`\n    void forwardNormal() {\n      vNormalWorld = ${1===e.viewingMode?a`normalize(vPositionWorldCameraRelative);`:a`vec3(0.0, 0.0, 1.0);`}\n    }\n    `)):l.vertex.code.add(a`void forwardNormal() {}`)}!function(o){function r(o,r){o.setUniformMatrix4fv(\"viewNormal\",r)}o.bindUniforms=r}(l||(l={}));export{l as VertexNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.extensions.add(\"GL_EXT_shader_texture_lod\"),t.extensions.add(\"GL_OES_standard_derivatives\"),t.fragment.code.add(e`#ifndef GL_EXT_shader_texture_lod\nfloat calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\nfloat deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));\nreturn max(0.0, 0.5 * log2(deltaMaxSqr));\n}\n#endif\nvec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);\n#else\nvec2 dUVdxAuto = dFdx(uvAtlas);\nvec2 dUVdyAuto = dFdy(uvAtlas);\nfloat mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);\nfloat autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);\nreturn texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}`)}export{t as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{TextureCoordinateAttribute as e}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as t}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function u(u,a){u.include(e,a),u.fragment.code.add(r`\n  struct TextureLookupParameter {\n    vec2 uv;\n    ${a.supportsTextureAtlas?\"vec2 size;\":\"\"}\n  } vtc;\n  `),1===a.attributeTextureCoordinates&&u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn texture2D(tex, params.uv);\n}`),2===a.attributeTextureCoordinates&&(u.include(t),u.fragment.code.add(r`vec4 textureLookup(sampler2D tex, TextureLookupParameter params) {\nreturn textureAtlasLookup(tex, params.size, params.uv, vuvRegion);\n}`))}export{u as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{Slice as o}from\"../Slice.glsl.js\";import{Transform as r}from\"../Transform.glsl.js\";import{NormalAttribute as e}from\"../attributes/NormalAttribute.glsl.js\";import{TextureCoordinateAttribute as t}from\"../attributes/TextureCoordinateAttribute.glsl.js\";import{VertexNormal as i}from\"../attributes/VertexNormal.glsl.js\";import{OutputDepth as a}from\"../output/OutputDepth.glsl.js\";import{OutputHighlight as l}from\"../output/OutputHighlight.glsl.js\";import{VisualVariables as s}from\"../shading/VisualVariables.glsl.js\";import{DiscardOrAdjustAlpha as d}from\"../util/AlphaDiscard.glsl.js\";import{glsl as n}from\"../../shaderModules/interfaces.js\";function u(u,c){const p=u.vertex.code,v=u.fragment.code;1!==c.output&&3!==c.output||(u.include(r,{linearDepth:!0}),u.include(t,c),u.include(s,c),u.include(a,c),u.include(o,c),u.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),u.varyings.add(\"depth\",\"float\"),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPositionWithDepth(proj, view, vpos, cameraNearFar, depth);\nforwardTextureCoordinates();\n}`),u.include(d,c),v.add(n`\n      void main(void) {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputDepth(depth);\n      }\n    `)),2===c.output&&(u.include(r,{linearDepth:!1}),u.include(e,c),u.include(i,c),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),u.vertex.uniforms.add(\"viewNormal\",\"mat4\"),u.varyings.add(\"vPositionView\",\"vec3\"),p.add(n`\n      void main(void) {\n        vpos = calculateVPos();\n        vpos = subtractOrigin(vpos);\n        ${0===c.normalType?n`\n        vNormalWorld = dpNormalView(vvLocalNormal(normalModel()));`:\"\"}\n        vpos = addVerticalOffset(vpos, localOrigin);\n        gl_Position = transformPosition(proj, view, vpos);\n        forwardTextureCoordinates();\n      }\n    `),u.include(o,c),u.include(d,c),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n\n        ${3===c.normalType?n`\n            vec3 normal = screenDerivativeNormal(vPositionView);`:n`\n            vec3 normal = normalize(vNormalWorld);\n            if (gl_FrontFacing == false) normal = -normal;`}\n        gl_FragColor = vec4(vec3(0.5) + 0.5 * normal, 1.0);\n      }\n    `)),4===c.output&&(u.include(r,{linearDepth:!1}),u.include(t,c),u.include(s,c),c.hasColorTexture&&u.fragment.uniforms.add(\"tex\",\"sampler2D\"),p.add(n`void main(void) {\nvpos = calculateVPos();\nvpos = subtractOrigin(vpos);\nvpos = addVerticalOffset(vpos, localOrigin);\ngl_Position = transformPosition(proj, view, vpos);\nforwardTextureCoordinates();\n}`),u.include(o,c),u.include(d,c),u.include(l),v.add(n`\n      void main() {\n        discardBySlice(vpos);\n        ${c.hasColorTexture?n`\n        vec4 texColor = texture2D(tex, vuv0);\n        discardOrAdjustAlpha(texColor);`:\"\"}\n        outputHighlight();\n      }\n    `))}export{u as DefaultMaterialAuxiliaryPasses};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{VertexTextureCoordinates as e}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function n(n,a){const r=n.fragment;a.vertexTangents?(n.attributes.add(\"tangent\",\"vec4\"),n.varyings.add(\"vTangent\",\"vec4\"),2===a.doubleSidedMode?r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = gl_FrontFacing ? vTangent.w : -vTangent.w;\nvec3 tangent = normalize(gl_FrontFacing ? vTangent.xyz : -vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`):r.code.add(t`mat3 computeTangentSpace(vec3 normal) {\nfloat tangentHeadedness = vTangent.w;\nvec3 tangent = normalize(vTangent.xyz);\nvec3 bitangent = cross(normal, tangent) * tangentHeadedness;\nreturn mat3(tangent, bitangent, normal);\n}`)):(n.extensions.add(\"GL_OES_standard_derivatives\"),r.code.add(t`mat3 computeTangentSpace(vec3 normal, vec3 pos, vec2 st) {\nvec3 Q1 = dFdx(pos);\nvec3 Q2 = dFdy(pos);\nvec2 stx = dFdx(st);\nvec2 sty = dFdy(st);\nfloat det = stx.t * sty.s - sty.t * stx.s;\nvec3 T = stx.t * Q2 - sty.t * Q1;\nT = T - normal * dot(normal, T);\nT *= inversesqrt(max(dot(T,T), 1.e-10));\nvec3 B = sign(det) * cross(normal, T);\nreturn mat3(T, B, normal);\n}`)),0!==a.attributeTextureCoordinates&&(n.include(e,a),r.uniforms.add(\"normalTexture\",\"sampler2D\"),r.uniforms.add(\"normalTextureSize\",\"vec2\"),r.code.add(t`\n    vec3 computeTextureNormal(mat3 tangentSpace, vec2 uv) {\n      vtc.uv = uv;\n      ${a.supportsTextureAtlas?\"vtc.size = normalTextureSize;\":\"\"}\n      vec3 rawNormal = textureLookup(normalTexture, vtc).rgb * 2.0 - 1.0;\n      return tangentSpace * rawNormal;\n    }\n  `))}export{n as ComputeNormalTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o,t){const r=o.fragment;t.receiveAmbientOcclusion?(r.uniforms.add(\"ssaoTex\",\"sampler2D\"),r.uniforms.add(\"viewportPixelSz\",\"vec4\"),r.code.add(e`float evaluateAmbientOcclusion() {\nreturn 1.0 - texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\n}\nfloat evaluateAmbientOcclusionInverse() {\nfloat ssao = texture2D(ssaoTex, (gl_FragCoord.xy - viewportPixelSz.xy) * viewportPixelSz.zw).a;\nreturn viewportPixelSz.z < 0.0 ? 1.0 : ssao;\n}`)):r.code.add(e`float evaluateAmbientOcclusion() { return 0.0; }\nfloat evaluateAmbientOcclusionInverse() { return 1.0; }`)}export{o as EvaluateAmbientOcclusion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n,t){const e=n.fragment,a=void 0!==t.lightingSphericalHarmonicsOrder?t.lightingSphericalHarmonicsOrder:2;0===a?(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===a?(e.uniforms.add(\"lightingAmbientSH_R\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===a&&(e.uniforms.add(\"lightingAmbientSH0\",\"vec3\"),e.uniforms.add(\"lightingAmbientSH_R1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B1\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_R2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_G2\",\"vec4\"),e.uniforms.add(\"lightingAmbientSH_B2\",\"vec4\"),e.code.add(i`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),1!==t.pbrMode&&2!==t.pbrMode||e.code.add(i`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}export{n as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as i}from\"../../shaderModules/interfaces.js\";function n(n){const t=n.fragment;t.uniforms.add(\"lightingMainDirection\",\"vec3\"),t.uniforms.add(\"lightingMainIntensity\",\"vec3\"),t.uniforms.add(\"lightingFixedFactor\",\"float\"),t.code.add(i`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, lightingMainDirection), 0.0, 1.0);\ndotVal = mix(dotVal, 1.0, lightingFixedFactor);\nreturn lightingMainIntensity * ((1.0 - shadowing) * dotVal);\n}`)}export{n as EvaluateMainLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{EvaluateAmbientLighting as i}from\"./EvaluateAmbientLighting.glsl.js\";import{EvaluateAmbientOcclusion as n}from\"./EvaluateAmbientOcclusion.glsl.js\";import{EvaluateMainLighting as o}from\"./EvaluateMainLighting.glsl.js\";import{PhysicallyBasedRendering as e}from\"./PhysicallyBasedRendering.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{ReadShadowMap as a}from\"./ReadShadowMap.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";function l(l,d){const c=l.fragment;l.include(o),l.include(n,d),0!==d.pbrMode&&l.include(e,d),l.include(i,d),d.receiveShadows&&l.include(a,d),c.uniforms.add(\"lightingGlobalFactor\",\"float\"),c.uniforms.add(\"ambientBoostFactor\",\"float\"),l.include(t),c.code.add(r`\n    const float GAMMA_SRGB = 2.1;\n    const float INV_GAMMA_SRGB = 0.4761904;\n    ${0===d.pbrMode?\"\":\"const vec3 GROUND_REFLECTANCE = vec3(0.2);\"}\n  `),c.code.add(r`\n    float additionalDirectedAmbientLight(vec3 vPosWorld) {\n      float vndl = dot(${1===d.viewingMode?r`normalize(vPosWorld)`:r`vec3(0.0, 0.0, 1.0)`}, lightingMainDirection);\n      return smoothstep(0.0, 1.0, clamp(vndl * 2.5, 0.0, 1.0));\n    }\n  `),c.code.add(r`vec3 evaluateAdditionalLighting(float ambientOcclusion, vec3 vPosWorld) {\nfloat additionalAmbientScale = additionalDirectedAmbientLight(vPosWorld);\nreturn (1.0 - ambientOcclusion) * additionalAmbientScale * ambientBoostFactor * lightingGlobalFactor * lightingMainIntensity;\n}`),0===d.pbrMode||4===d.pbrMode?c.code.add(r`vec3 evaluateSceneLighting(vec3 normalWorld, vec3 albedo, float shadow, float ssao, vec3 additionalLight)\n{\nvec3 mainLighting = evaluateMainLighting(normalWorld, shadow);\nvec3 ambientLighting = calculateAmbientIrradiance(normalWorld, ssao);\nvec3 albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\nvec3 totalLight = mainLighting + ambientLighting + additionalLight;\ntotalLight = min(totalLight, vec3(PI));\nvec3 outColor = vec3((albedoLinear / PI) * totalLight);\nreturn pow(outColor, vec3(INV_GAMMA_SRGB));\n}`):1!==d.pbrMode&&2!==d.pbrMode||(c.code.add(r`const float fillLightIntensity = 0.25;\nconst float horizonLightDiffusion = 0.4;\nconst float additionalAmbientIrradianceFactor = 0.02;\nvec3 evaluateSceneLightingPBR(vec3 normal, vec3 albedo, float shadow, float ssao, vec3 additionalLight, vec3 viewDir, vec3 normalGround, vec3 mrr, vec3 _emission, float additionalAmbientIrradiance)\n{\nvec3 viewDirection = -viewDir;\nvec3 mainLightDirection = lightingMainDirection;\nvec3 h = normalize(viewDirection + mainLightDirection);\nPBRShadingInfo inputs;\ninputs.NdotL = clamp(dot(normal, mainLightDirection), 0.001, 1.0);\ninputs.NdotV = clamp(abs(dot(normal, viewDirection)), 0.001, 1.0);\ninputs.NdotH = clamp(dot(normal, h), 0.0, 1.0);\ninputs.VdotH = clamp(dot(viewDirection, h), 0.0, 1.0);\ninputs.NdotNG = clamp(dot(normal, normalGround), -1.0, 1.0);\nvec3 reflectedView = normalize(reflect(viewDirection, normal));\ninputs.RdotNG = clamp(dot(reflectedView, normalGround), -1.0, 1.0);\ninputs.albedoLinear = pow(albedo, vec3(GAMMA_SRGB));\ninputs.ssao = ssao;\ninputs.metalness = mrr[0];\ninputs.roughness = clamp(mrr[1] * mrr[1], 0.001, 0.99);`),c.code.add(r`inputs.f0 = (0.16 * mrr[2] * mrr[2]) * (1.0 - inputs.metalness) + inputs.albedoLinear * inputs.metalness;\ninputs.f90 = vec3(clamp(dot(inputs.f0, vec3(50.0 * 0.33)), 0.0, 1.0));\ninputs.diffuseColor = inputs.albedoLinear * (vec3(1.0) - inputs.f0) * (1.0 - inputs.metalness);`),c.code.add(r`vec3 ambientDir = vec3(5.0 * normalGround[1] - normalGround[0] * normalGround[2], - 5.0 * normalGround[0] - normalGround[2] * normalGround[1], normalGround[1] * normalGround[1] + normalGround[0] * normalGround[0]);\nambientDir = ambientDir != vec3(0.0)? normalize(ambientDir) : normalize(vec3(5.0, -1.0, 0.0));\ninputs.NdotAmbDir = abs(dot(normal, ambientDir));\nvec3 mainLightIrradianceComponent = inputs.NdotL * (1.0 - shadow) * lightingMainIntensity;\nvec3 fillLightsIrradianceComponent = inputs.NdotAmbDir * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightIrradianceComponent = calculateAmbientIrradiance(normal, ssao) + additionalLight;\ninputs.skyIrradianceToSurface = ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;\ninputs.groundIrradianceToSurface = GROUND_REFLECTANCE * ambientLightIrradianceComponent + mainLightIrradianceComponent + fillLightsIrradianceComponent ;`),c.code.add(r`vec3 horizonRingDir = inputs.RdotNG * normalGround - reflectedView;\nvec3 horizonRingH = normalize(viewDirection + horizonRingDir);\ninputs.NdotH_Horizon = dot(normal, horizonRingH);\nvec3 mainLightRadianceComponent = normalDistribution(inputs.NdotH, inputs.roughness) * lightingMainIntensity * (1.0 - shadow);\nvec3 horizonLightRadianceComponent = normalDistribution(inputs.NdotH_Horizon, min(inputs.roughness + horizonLightDiffusion, 1.0)) * lightingMainIntensity * fillLightIntensity;\nvec3 ambientLightRadianceComponent = calculateAmbientRadiance(ssao) + additionalLight;\ninputs.skyRadianceToSurface = ambientLightRadianceComponent + mainLightRadianceComponent + horizonLightRadianceComponent;\ninputs.groundRadianceToSurface = GROUND_REFLECTANCE * (ambientLightRadianceComponent + horizonLightRadianceComponent) + mainLightRadianceComponent;\ninputs.averageAmbientRadiance = ambientLightIrradianceComponent[1] * (1.0 + GROUND_REFLECTANCE[1]);`),c.code.add(r`\n        vec3 reflectedColorComponent = evaluateEnvironmentIllumination(inputs);\n        vec3 additionalMaterialReflectanceComponent = inputs.albedoLinear * additionalAmbientIrradiance;\n        vec3 emissionComponent = pow(_emission, vec3(GAMMA_SRGB));\n        vec3 outColorLinear = reflectedColorComponent + additionalMaterialReflectanceComponent + emissionComponent;\n        ${2===d.pbrMode?r`vec3 outColor = pow(max(vec3(0.0), outColorLinear - 0.005 * inputs.averageAmbientRadiance), vec3(INV_GAMMA_SRGB));`:r`vec3 outColor = pow(blackLevelSoftCompression(outColorLinear, inputs), vec3(INV_GAMMA_SRGB));`}\n        return outColor;\n      }\n    `))}export{l as EvaluateSceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/interfaces.js\";function r(r,e){const m=r.fragment;m.code.add(a`struct ShadingNormalParameters {\nvec3 normalView;\nvec3 viewDirection;\n} shadingParams;`),1===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn dot(params.normalView, params.viewDirection) > 0.0 ? normalize(-params.normalView) : normalize(params.normalView);\n}`):2===e.doubleSidedMode?m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn gl_FrontFacing ? normalize(params.normalView) : normalize(-params.normalView);\n}`):m.code.add(a`vec3 shadingNormal(ShadingNormalParameters params) {\nreturn normalize(params.normalView);\n}`)}export{r as Normals};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{glsl as o}from\"../../shaderModules/interfaces.js\";const t=e(0,.6,.2);function r(e,t){const r=e.fragment,a=t.hasMetalnessAndRoughnessTexture||t.hasEmissionTexture||t.hasOcclusionTexture;1===t.pbrMode&&a&&e.include(s,t),2!==t.pbrMode?(0===t.pbrMode&&r.code.add(o`float getBakedOcclusion() { return 1.0; }`),1===t.pbrMode&&(r.uniforms.add(\"emissionFactor\",\"vec3\"),r.uniforms.add(\"mrrFactors\",\"vec3\"),r.code.add(o`vec3 mrr;\nvec3 emission;\nfloat occlusion;`),t.hasMetalnessAndRoughnessTexture&&(r.uniforms.add(\"texMetallicRoughness\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texMetallicRoughnessSize\",\"vec2\"),r.code.add(o`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),t.hasEmissionTexture&&(r.uniforms.add(\"texEmission\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texEmissionSize\",\"vec2\"),r.code.add(o`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),t.hasOcclusionTexture?(r.uniforms.add(\"texOcclusion\",\"sampler2D\"),t.supportsTextureAtlas&&r.uniforms.add(\"texOcclusionSize\",\"vec2\"),r.code.add(o`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):r.code.add(o`float getBakedOcclusion() { return 1.0; }`),r.code.add(o`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${a?\"vtc.uv = vuv0;\":\"\"}\n      ${t.hasMetalnessAndRoughnessTexture?t.supportsTextureAtlas?\"vtc.size = texMetallicRoughnessSize; applyMetallnessAndRoughness(vtc);\":\"applyMetallnessAndRoughness(vtc);\":\"\"}\n      ${t.hasEmissionTexture?t.supportsTextureAtlas?\"vtc.size = texEmissionSize; applyEmission(vtc);\":\"applyEmission(vtc);\":\"\"}\n      ${t.hasOcclusionTexture?t.supportsTextureAtlas?\"vtc.size = texOcclusionSize; applyOcclusion(vtc);\":\"applyOcclusion(vtc);\":\"\"}\n    }\n  `))):r.code.add(o`const vec3 mrr = vec3(0.0, 0.6, 0.2);\nconst vec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}function a(e,s,o=!1){o||(e.setUniform3fv(\"mrrFactors\",s.mrrFactors),e.setUniform3fv(\"emissionFactor\",s.emissiveFactor))}export{t as PBRSchematicMRRValues,r as PhysicallyBasedRenderingParameters,a as bindPBRUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../../core/has.js\";import{glsl as c}from\"../../shaderModules/interfaces.js\";function i({code:e},i){i.doublePrecisionRequiresObfuscation?e.add(c`vec3 dpPlusFrc(vec3 a, vec3 b) {\nreturn mix(a, a + b, vec3(notEqual(b, vec3(0))));\n}\nvec3 dpMinusFrc(vec3 a, vec3 b) {\nreturn mix(vec3(0), a - b, vec3(notEqual(a, b)));\n}\nvec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = dpPlusFrc(hiA, hiB);\nvec3 e = dpMinusFrc(t1, hiA);\nvec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\nreturn t1 + t2;\n}`):e.add(c`vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\nvec3 t1 = hiA + hiB;\nvec3 e = t1 - hiA;\nvec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\nreturn t1 + t2;\n}`)}function r(c){return!!e(\"force-double-precision-obfuscation\")||c.driverTest.doublePrecisionRequiresObfuscation}export{i as DoublePrecision,r as doublePrecisionRequiresObfuscation};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";import{webglValidateShadersEnabled as e}from\"../../../../../webgl/checkWebGLError.js\";function u(u,o){const r=t`\n  /*\n  *  ${o.name}\n  *  ${0===o.output?\"RenderOutput: Color\":1===o.output?\"RenderOutput: Depth\":3===o.output?\"RenderOutput: Shadow\":2===o.output?\"RenderOutput: Normal\":4===o.output?\"RenderOutput: Highlight\":\"\"}\n  */\n  `;e()&&(u.fragment.code.add(r),u.vertex.code.add(r))}export{u as HeaderComment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{ColorConversion as e}from\"./ColorConversion.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function i(i){i.include(e),i.code.add(t`\n    vec3 mixExternalColor(vec3 internalColor, vec3 textureColor, vec3 externalColor, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      vec3 internalMixed = internalColor * textureColor;\n      vec3 allMixed = internalMixed * externalColor;\n\n      if (mode == ${t.int(1)}) {\n        return allMixed;\n      }\n      else if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalColor;\n      }\n      else {\n        // tint (or something invalid)\n        float vIn = rgb2v(internalMixed);\n        vec3 hsvTint = rgb2hsv(externalColor);\n        vec3 hsvOut = vec3(hsvTint.x, hsvTint.y, vIn * hsvTint.z);\n        return hsv2rgb(hsvOut);\n      }\n    }\n\n    float mixExternalOpacity(float internalOpacity, float textureOpacity, float externalOpacity, int mode) {\n      // workaround for artifacts in OSX using Intel Iris Pro\n      // see: https://devtopia.esri.com/WebGIS/arcgis-js-api/issues/10475\n      float internalMixed = internalOpacity * textureOpacity;\n      float allMixed = internalMixed * externalOpacity;\n\n      if (mode == ${t.int(2)}) {\n        return internalMixed;\n      }\n      else if (mode == ${t.int(3)}) {\n        return externalOpacity;\n      }\n      else {\n        // multiply or tint (or something invalid)\n        return allMixed;\n      }\n    }\n  `)}export{i as MixExternalColor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{f as t}from\"../../../../chunks/vec3f64.js\";import{bindSliceUniforms as r}from\"../core/shaderLibrary/Slice.glsl.js\";import{InstancedDoublePrecision as i}from\"../core/shaderLibrary/attributes/InstancedDoublePrecision.glsl.js\";import{bindVerticalOffsetUniforms as o}from\"../core/shaderLibrary/attributes/VerticalOffset.glsl.js\";import{bindOutputHighlight as s}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{bindMultipassTerrainTexture as a}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{bindPBRUniforms as n}from\"../core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js\";import{bindReadShadowMapViewCustomOrigin as l}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{bindVisualVariablesUniformsForSymbols as p}from\"../core/shaderLibrary/shading/VisualVariables.glsl.js\";import{doublePrecisionRequiresObfuscation as c}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{bindProjectionMatrix as u,bindViewCustomOrigin as h,bindCameraPosition as d}from\"../core/shaderLibrary/util/View.glsl.js\";import{ReloadableShaderModule as m}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as f}from\"../core/shaderTechnique/ShaderTechnique.js\";import{parameter as v,ShaderTechniqueConfiguration as g}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as b}from\"../lib/DefaultVertexAttributeLocations.js\";import{blendingDefault as y,OITBlending as x,OITDepthTest as T,getOITPolygonOffset as P}from\"../lib/OrderIndependentTransparency.js\";import{Program as M}from\"../lib/Program.js\";import{stencilWriteMaskOn as S,stencilToolMaskBaseParams as C,stencilBaseAllZerosParams as O}from\"../lib/StencilUtils.js\";import{colorMixModes as D,bindScreenSizePerspective as w}from\"../materials/internal/MaterialUtil.js\";import{D as j}from\"../../../../chunks/DefaultMaterial.glsl.js\";import{makePipelineState as A,cullingParams as E,defaultDepthWriteParams as U,defaultColorWriteParams as z}from\"../../../webgl/renderState.js\";class R extends f{initializeProgram(e){const t=R.shader.get(),r=this.configuration,i=t.build({OITEnabled:0===r.transparencyPassType,output:r.output,viewingMode:e.viewingMode,receiveShadows:r.receiveShadows,slicePlaneEnabled:r.slicePlaneEnabled,sliceHighlightDisabled:r.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:r.symbolColors,vvSize:r.vvSize,vvColor:r.vvColor,vvInstancingEnabled:!0,instanced:r.instanced,instancedColor:r.instancedColor,instancedDoublePrecision:r.instancedDoublePrecision,pbrMode:r.usePBR?r.isSchematic?2:1:0,hasMetalnessAndRoughnessTexture:r.hasMetalnessAndRoughnessTexture,hasEmissionTexture:r.hasEmissionTexture,hasOcclusionTexture:r.hasOcclusionTexture,hasNormalTexture:r.hasNormalTexture,hasColorTexture:r.hasColorTexture,receiveAmbientOcclusion:r.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:r.normalsTypeDerivate?3:0,doubleSidedMode:r.doubleSidedMode,vertexTangents:r.vertexTangents,attributeTextureCoordinates:r.hasMetalnessAndRoughnessTexture||r.hasEmissionTexture||r.hasOcclusionTexture||r.hasNormalTexture||r.hasColorTexture?1:0,textureAlphaPremultiplied:r.textureAlphaPremultiplied,attributeColor:r.vertexColors,screenSizePerspectiveEnabled:r.screenSizePerspective,verticalOffsetEnabled:r.verticalOffset,offsetBackfaces:r.offsetBackfaces,doublePrecisionRequiresObfuscation:c(e.rctx),alphaDiscardMode:r.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:r.multipassTerrainEnabled,cullAboveGround:r.cullAboveGround});return new M(e.rctx,i,b)}bindPass(e,t){var r,i;u(this.program,t.camera.projectionMatrix);const l=this.configuration.output;(1===this.configuration.output||t.multipassTerrainEnabled||3===l)&&this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),a(this.program,t)),7===l&&(this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode])),0===l?(t.lighting.setUniforms(this.program,!1),this.program.setUniform3fv(\"ambient\",e.ambient),this.program.setUniform3fv(\"diffuse\",e.diffuse),this.program.setUniform4fv(\"externalColor\",e.externalColor),this.program.setUniform1i(\"colorMixMode\",D[e.colorMixMode]),this.program.setUniform1f(\"opacity\",e.opacity),this.program.setUniform1f(\"layerOpacity\",e.layerOpacity),this.configuration.usePBR&&n(this.program,e,this.configuration.isSchematic)):4===l&&s(this.program,t),p(this.program,e),o(this.program,e,t),w(e.screenSizePerspective,this.program,\"screenSizePerspectiveAlignment\"),2!==e.textureAlphaMode&&3!==e.textureAlphaMode||this.program.setUniform1f(\"textureAlphaCutoff\",e.textureAlphaCutoff),null==(r=t.shadowMap)||r.bind(this.program),null==(i=t.ssaoHelper)||i.bind(this.program,t.camera)}bindDraw(e){const o=this.configuration.instancedDoublePrecision?t(e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]):e.origin;h(this.program,o,e.camera.viewMatrix),this.program.rebindTextures(),(0===this.configuration.output||7===this.configuration.output||1===this.configuration.output&&this.configuration.screenSizePerspective||2===this.configuration.output&&this.configuration.screenSizePerspective||4===this.configuration.output&&this.configuration.screenSizePerspective)&&d(this.program,o,e.camera.viewInverseTransposeMatrix),2===this.configuration.output&&this.program.setUniformMatrix4fv(\"viewNormal\",e.camera.viewInverseTransposeMatrix),this.configuration.instancedDoublePrecision&&i.bindCustomOrigin(this.program,o),r(this.program,this.configuration,e.slicePlane,o),0===this.configuration.output&&l(this.program,e,o)}setPipeline(e,t){const r=this.configuration,i=3===e,o=2===e;return A({blending:0!==r.output&&7!==r.output||!r.transparent?null:i?y:x(e),culling:L(r)&&E(r.cullFace),depthTest:{func:T(e)},depthWrite:i||o?r.writeDepth&&U:null,colorWrite:z,stencilWrite:r.sceneHasOcludees?S:null,stencilTest:r.sceneHasOcludees?t?C:O:null,polygonOffset:i||o?null:P(r.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this.setPipeline(this.configuration.transparencyPassType,!0),this.setPipeline(this.configuration.transparencyPassType,!1)}getPipelineState(e,t){return t?this._occludeePipelineState:super.getPipelineState(e,t)}}function L(e){return e.cullFace?0!==e.cullFace:!e.slicePlaneEnabled&&(!e.transparent&&!e.doubleSidedMode)}R.shader=new m(j,(()=>import(\"./DefaultMaterial.glsl.js\")));class H extends g{constructor(){super(...arguments),this.output=0,this.alphaDiscardMode=1,this.doubleSidedMode=0,this.isSchematic=!1,this.vertexColors=!1,this.offsetBackfaces=!1,this.symbolColors=!1,this.vvSize=!1,this.vvColor=!1,this.verticalOffset=!1,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.sliceHighlightDisabled=!1,this.receiveAmbientOcclusion=!1,this.screenSizePerspective=!1,this.textureAlphaPremultiplied=!1,this.hasColorTexture=!1,this.usePBR=!1,this.hasMetalnessAndRoughnessTexture=!1,this.hasEmissionTexture=!1,this.hasOcclusionTexture=!1,this.hasNormalTexture=!1,this.instanced=!1,this.instancedColor=!1,this.instancedDoublePrecision=!1,this.vertexTangents=!1,this.normalsTypeDerivate=!1,this.writeDepth=!0,this.sceneHasOcludees=!1,this.transparent=!1,this.enableOffset=!0,this.cullFace=0,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!1}}e([v({count:8})],H.prototype,\"output\",void 0),e([v({count:4})],H.prototype,\"alphaDiscardMode\",void 0),e([v({count:3})],H.prototype,\"doubleSidedMode\",void 0),e([v()],H.prototype,\"isSchematic\",void 0),e([v()],H.prototype,\"vertexColors\",void 0),e([v()],H.prototype,\"offsetBackfaces\",void 0),e([v()],H.prototype,\"symbolColors\",void 0),e([v()],H.prototype,\"vvSize\",void 0),e([v()],H.prototype,\"vvColor\",void 0),e([v()],H.prototype,\"verticalOffset\",void 0),e([v()],H.prototype,\"receiveShadows\",void 0),e([v()],H.prototype,\"slicePlaneEnabled\",void 0),e([v()],H.prototype,\"sliceHighlightDisabled\",void 0),e([v()],H.prototype,\"receiveAmbientOcclusion\",void 0),e([v()],H.prototype,\"screenSizePerspective\",void 0),e([v()],H.prototype,\"textureAlphaPremultiplied\",void 0),e([v()],H.prototype,\"hasColorTexture\",void 0),e([v()],H.prototype,\"usePBR\",void 0),e([v()],H.prototype,\"hasMetalnessAndRoughnessTexture\",void 0),e([v()],H.prototype,\"hasEmissionTexture\",void 0),e([v()],H.prototype,\"hasOcclusionTexture\",void 0),e([v()],H.prototype,\"hasNormalTexture\",void 0),e([v()],H.prototype,\"instanced\",void 0),e([v()],H.prototype,\"instancedColor\",void 0),e([v()],H.prototype,\"instancedDoublePrecision\",void 0),e([v()],H.prototype,\"vertexTangents\",void 0),e([v()],H.prototype,\"normalsTypeDerivate\",void 0),e([v()],H.prototype,\"writeDepth\",void 0),e([v()],H.prototype,\"sceneHasOcludees\",void 0),e([v()],H.prototype,\"transparent\",void 0),e([v()],H.prototype,\"enableOffset\",void 0),e([v({count:3})],H.prototype,\"cullFace\",void 0),e([v({count:4})],H.prototype,\"transparencyPassType\",void 0),e([v()],H.prototype,\"multipassTerrainEnabled\",void 0),e([v()],H.prototype,\"cullAboveGround\",void 0);export{R as DefaultMaterialTechnique,H as DefaultMaterialTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{R as e}from\"../../../../chunks/RealisticTree.glsl.js\";import{doublePrecisionRequiresObfuscation as r}from\"../core/shaderLibrary/util/DoublePrecision.glsl.js\";import{ReloadableShaderModule as s}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{Default3D as i}from\"../lib/DefaultVertexAttributeLocations.js\";import{Program as o}from\"../lib/Program.js\";import{DefaultMaterialTechnique as t}from\"./DefaultMaterialTechnique.js\";class a extends t{initializeProgram(e){const s=a.shader.get(),t=this.configuration,l=s.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:e.viewingMode,receiveShadows:t.receiveShadows,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:t.sliceHighlightDisabled,sliceEnabledForVertexPrograms:!1,symbolColor:t.symbolColors,vvSize:t.vvSize,vvColor:t.vvColor,vvInstancingEnabled:!0,instanced:t.instanced,instancedColor:t.instancedColor,instancedDoublePrecision:t.instancedDoublePrecision,pbrMode:t.usePBR?1:0,hasMetalnessAndRoughnessTexture:!1,hasEmissionTexture:!1,hasOcclusionTexture:!1,hasNormalTexture:!1,hasColorTexture:t.hasColorTexture,receiveAmbientOcclusion:t.receiveAmbientOcclusion,useCustomDTRExponentForWater:!1,normalType:0,doubleSidedMode:2,vertexTangents:!1,attributeTextureCoordinates:t.hasColorTexture?1:0,textureAlphaPremultiplied:t.textureAlphaPremultiplied,attributeColor:t.vertexColors,screenSizePerspectiveEnabled:t.screenSizePerspective,verticalOffsetEnabled:t.verticalOffset,offsetBackfaces:t.offsetBackfaces,doublePrecisionRequiresObfuscation:r(e.rctx),alphaDiscardMode:t.alphaDiscardMode,supportsTextureAtlas:!1,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new o(e.rctx,l,i)}}a.shader=new s(e,(()=>import(\"../core/shaderLibrary/default/RealisticTree.glsl.js\")));export{a as RealisticTreeTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../chunks/mat3f64.js\";import{s as t,g as i,n as s,f as r,l as a,a as n,d as o,t as l}from\"../../../../chunks/vec3.js\";import{c,f as u}from\"../../../../chunks/vec3f64.js\";import{newLayout as h}from\"../../support/buffer/InterleavedLayout.js\";import{defaultMaskAlphaCutoff as d}from\"../core/shaderLibrary/util/AlphaDiscard.glsl.js\";import p from\"../lib/GLMaterialTexture.js\";import{Material as m,materialParametersDefaults as f}from\"../lib/Material.js\";import{OITPolygonOffsetLimit as v}from\"../lib/OrderIndependentTransparency.js\";import{getVerticalOffsetObject3D as g}from\"../lib/verticalOffsetUtils.js\";import{writeDefaultAttributes as C}from\"./internal/bufferWriterUtils.js\";import{verticalOffsetAtDistance as b,intersectTriangleGeometry as x}from\"./internal/MaterialUtil.js\";import{DefaultMaterialTechniqueConfiguration as S,DefaultMaterialTechnique as T}from\"../shaders/DefaultMaterialTechnique.js\";import{RealisticTreeTechnique as q}from\"../shaders/RealisticTreeTechnique.js\";class y extends m{constructor(e){super(e,P),this.supportsEdges=!0,this.techniqueConfig=new S,this.vertexBufferLayout=w(this.parameters),this.instanceBufferLayout=e.instanced?E(this.parameters):null}isVisibleInPass(e){return 4!==e&&6!==e&&7!==e||this.parameters.castShadows}isVisible(){const e=this.parameters;if(!super.isVisible()||0===e.layerOpacity)return!1;const t=e.instanced,i=e.vertexColors,s=e.symbolColors,r=!!t&&t.indexOf(\"color\")>-1,a=e.vvColorEnabled,n=\"replace\"===e.colorMixMode,o=e.opacity>0,l=e.externalColor&&e.externalColor[3]>0;return i&&(r||a||s)?!!n||o:i?n?l:o:r||a||s?!!n||o:n?l:o}getTechniqueConfig(e,t){return this.techniqueConfig.output=e,this.techniqueConfig.hasNormalTexture=!!this.parameters.normalTextureId,this.techniqueConfig.hasColorTexture=!!this.parameters.textureId,this.techniqueConfig.vertexTangents=this.parameters.vertexTangents,this.techniqueConfig.instanced=!!this.parameters.instanced,this.techniqueConfig.instancedDoublePrecision=this.parameters.instancedDoublePrecision,this.techniqueConfig.vvSize=this.parameters.vvSizeEnabled,this.techniqueConfig.verticalOffset=null!==this.parameters.verticalOffset,this.techniqueConfig.screenSizePerspective=null!==this.parameters.screenSizePerspective,this.techniqueConfig.slicePlaneEnabled=this.parameters.slicePlaneEnabled,this.techniqueConfig.sliceHighlightDisabled=this.parameters.sliceHighlightDisabled,this.techniqueConfig.alphaDiscardMode=this.parameters.textureAlphaMode,this.techniqueConfig.normalsTypeDerivate=\"screenDerivative\"===this.parameters.normals,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.sceneHasOcludees=this.parameters.sceneHasOcludees,this.techniqueConfig.cullFace=this.parameters.slicePlaneEnabled?0:this.parameters.cullFace,this.techniqueConfig.multipassTerrainEnabled=t.multipassTerrainEnabled,this.techniqueConfig.cullAboveGround=t.cullAboveGround,0!==e&&7!==e||(this.techniqueConfig.vertexColors=this.parameters.vertexColors,this.techniqueConfig.symbolColors=this.parameters.symbolColors,this.parameters.treeRendering?this.techniqueConfig.doubleSidedMode=2:this.techniqueConfig.doubleSidedMode=this.parameters.doubleSided&&\"normal\"===this.parameters.doubleSidedType?1:this.parameters.doubleSided&&\"winding-order\"===this.parameters.doubleSidedType?2:0,this.techniqueConfig.instancedColor=!!this.parameters.instanced&&this.parameters.instanced.indexOf(\"color\")>-1,this.techniqueConfig.receiveShadows=this.parameters.receiveShadows&&this.parameters.shadowMappingEnabled,this.techniqueConfig.receiveAmbientOcclusion=!!t.ssaoEnabled&&this.parameters.receiveSSAO,this.techniqueConfig.vvColor=this.parameters.vvColorEnabled,this.techniqueConfig.textureAlphaPremultiplied=!!this.parameters.textureAlphaPremultiplied,this.techniqueConfig.usePBR=this.parameters.usePBR,this.techniqueConfig.hasMetalnessAndRoughnessTexture=!!this.parameters.metallicRoughnessTextureId,this.techniqueConfig.hasEmissionTexture=!!this.parameters.emissiveTextureId,this.techniqueConfig.hasOcclusionTexture=!!this.parameters.occlusionTextureId,this.techniqueConfig.offsetBackfaces=!(!this.parameters.transparent||!this.parameters.offsetTransparentBackfaces),this.techniqueConfig.isSchematic=this.parameters.usePBR&&this.parameters.isSchematic,this.techniqueConfig.transparencyPassType=t.transparencyPassType,this.techniqueConfig.enableOffset=t.camera.relativeElevation<v),this.techniqueConfig}intersect(e,c,u,h,d,p,m){if(null!==this.parameters.verticalOffset){const e=h.camera;t(j,u[12],u[13],u[14]);let c=null;switch(h.viewingMode){case 1:c=s(D,j);break;case 2:c=i(D,A)}let m=0;if(null!==this.parameters.verticalOffset){const t=r(L,j,e.eye),i=a(t),s=n(t,t,1/i);let l=null;this.parameters.screenSizePerspective&&(l=o(c,s)),m+=b(e,i,this.parameters.verticalOffset,l,this.parameters.screenSizePerspective)}n(c,c,m),l(z,c,h.transform.inverseRotation),d=r(I,d,z),p=r(B,p,z)}x(e,c,h,d,p,g(h.verticalOffset),m)}requiresSlot(e){return e===(this.parameters.transparent?this.parameters.writeDepth?4:7:2)||20===e}createGLMaterial(e){return 0===e.output||7===e.output||1===e.output||2===e.output||3===e.output||4===e.output?new O(e):null}createBufferWriter(){return new M(this.vertexBufferLayout,this.instanceBufferLayout)}}class O extends p{constructor(e){super({...e,...e.material.parameters})}updateParameters(e){const t=this._material.parameters;return this.updateTexture(t.textureId),this.ensureTechnique(t.treeRendering?q:T,e)}_updateShadowState(e){e.shadowMappingEnabled!==this._material.parameters.shadowMappingEnabled&&this._material.setParameters({shadowMappingEnabled:e.shadowMappingEnabled})}_updateOccludeeState(e){e.hasOccludees!==this._material.parameters.sceneHasOcludees&&this._material.setParameters({sceneHasOcludees:e.hasOccludees})}beginSlot(e){return 0!==this._output&&7!==this._output||(this._updateShadowState(e),this._updateOccludeeState(e)),this.updateParameters(e)}bind(e,t){t.bindPass(this._material.parameters,e),this.bindTextures(t.program)}}const P={textureId:void 0,initTextureTransparent:!1,isSchematic:!1,usePBR:!1,normalTextureId:void 0,vertexTangents:!1,occlusionTextureId:void 0,emissiveTextureId:void 0,metallicRoughnessTextureId:void 0,emissiveFactor:[0,0,0],mrrFactors:[0,1,.5],ambient:[.2,.2,.2],diffuse:[.8,.8,.8],externalColor:[1,1,1,1],colorMixMode:\"multiply\",opacity:1,layerOpacity:1,vertexColors:!1,symbolColors:!1,doubleSided:!1,doubleSidedType:\"normal\",cullFace:2,instanced:void 0,instancedDoublePrecision:!1,normals:\"default\",receiveSSAO:!0,receiveShadows:!0,castShadows:!0,shadowMappingEnabled:!1,verticalOffset:null,screenSizePerspective:null,slicePlaneEnabled:!1,sliceHighlightDisabled:!1,offsetTransparentBackfaces:!1,vvSizeEnabled:!1,vvSizeMinSize:[1,1,1],vvSizeMaxSize:[100,100,100],vvSizeOffset:[0,0,0],vvSizeFactor:[1,1,1],vvSizeValue:[1,1,1],vvColorEnabled:!1,vvColorValues:[0,0,0,0,0,0,0,0],vvColorColors:[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],vvSymbolAnchor:[0,0,0],vvSymbolRotationMatrix:e(),transparent:!1,writeDepth:!0,textureAlphaMode:0,textureAlphaCutoff:d,textureAlphaPremultiplied:!1,sceneHasOcludees:!1,...f};class M{constructor(e,t){this.vertexBufferLayout=e,this.instanceBufferLayout=t}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){return e.indices.get(\"position\").length}write(e,t,i,s){C(t,this.vertexBufferLayout,e.transformation,e.invTranspTransformation,i,s)}}function w(e){const t=e.textureId||e.normalTextureId||e.metallicRoughnessTextureId||e.emissiveTextureId||e.occlusionTextureId,i=h().vec3f(\"position\").vec3f(\"normal\");return e.vertexTangents&&i.vec4f(\"tangent\"),t&&i.vec2f(\"uv0\"),e.vertexColors&&i.vec4u8(\"color\"),e.symbolColors&&i.vec4u8(\"symbolColor\"),i}function E(e){let t=h();return t=e.instancedDoublePrecision?t.vec3f(\"modelOriginHi\").vec3f(\"modelOriginLo\").mat3f(\"model\").mat3f(\"modelNormal\"):t.mat4f(\"model\").mat4f(\"modelNormal\"),e.instanced&&e.instanced.indexOf(\"color\")>-1&&(t=t.vec4f(\"instanceColor\")),e.instanced&&e.instanced.indexOf(\"featureAttribute\")>-1&&(t=t.vec4f(\"instanceFeatureAttribute\")),t}const I=c(),B=c(),A=u(0,0,1),D=c(),z=c(),j=c(),L=c();export{y as DefaultMaterial,E as getInstanceBufferLayout};\n"],"names":["P","_","S","vertex","code","$","fragment","include","name","output","uniforms","add","varyings","linearDepth","normalType","offsetBackfaces","instancedColor","attributes","multipassTerrainEnabled","vertexTangents","hasColorTexture","textureAlphaPremultiplied","attributeColor","receiveShadows","pbrMode","viewingMode","hasNormalTexture","OITEnabled","Object","freeze","__proto__","build","j","E","O","e","f","r","count","o","n","u","d","s","c","i","a","p","y","B","m","h","l","typedBuffer","typedBufferStride","b","M","t","v","Math","min","sqrt","transformMat4","transformMat3","scale","normalize","shiftRight","dstIndex","srcIndex","copy","fill","w","params","topology","vertexAttributes","warn","faces","values","valueType","valuesPerElement","material","forEach","boundingInfo","getBBMin","getBBMax","async","A","images","data","encoding","channels","alphaChannelUsage","noUnpackFlip","wrap","preMultiplyAlpha","U","disableTextures","Promise","resolve","push","then","refId","image","all","id","texture","region","I","q","fileType","cache","loadWOSR","url","streamDataRequester","request","ok","value","error","details","g","resource","textures","textureDefinitions","version","validate","model","geometries","x","materialDefinitions","Map","length","size","exclusive","Uint32Array","has","set","get","substring","lastIndexOf","transparency","ambient","diffuse","opacity","transparent","textureAlphaMode","textureAlphaCutoff","textureId","initTextureTransparent","doubleSided","cullFace","colorMixMode","externalColorMixMode","materialParamsMixin","assign","T","position","stageResources","materials","pivotOffset","boundingBox","numberOfVertices","lodThreshold","lods","referenceBoundingBox","isEsriSymbolResource","isWosr","remove","loadGLTF","usePBR","meta","uri","indexOf","customMeta","esriTreeRendering","parts","normal","transform","getVec","center","radius","setVec","color","J","isSchematic","treeRendering","mrrFactors","specifiedLodIndex","K","match","Number","Array","texCoord0","tangent","Q","alphaMode","textureColor","parameters","textureNormal","textureOcclusion","textureEmissive","textureMetallicRoughness","emissiveFactor","alphaCutoff","doubleSidedType","vertexColors","normals","castShadows","receiveSSAO","normalTextureId","occlusionTextureId","emissiveTextureId","metallicRoughnessTextureId","metallicFactor","roughnessFactor","H","indices","primitiveType","F","elementCount","buffer","k","L","instanced","instancedDoublePrecision","Uniforms","bindCustomOrigin","setUniform3fv","extensions","symbolColor","attributeTextureCoordinates","ModelTransform","constructor","this","worldFromModel_RS","worldFromModel_TH","worldFromModel_TL","ViewProjectionTransform","worldFromView_TH","worldFromView_TL","viewFromCameraRelative_RS","projFromView","bindModelTransform","setUniformMatrix3fv","bindViewProjTransform","setUniformMatrix4fv","bindUniforms","supportsTextureAtlas","doubleSidedMode","receiveAmbientOcclusion","lightingSphericalHarmonicsOrder","hasMetalnessAndRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","doublePrecisionRequiresObfuscation","driverTest","R","initializeProgram","shader","configuration","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","symbolColors","vvSize","vvColor","vvInstancingEnabled","useCustomDTRExponentForWater","normalsTypeDerivate","screenSizePerspectiveEnabled","screenSizePerspective","verticalOffsetEnabled","verticalOffset","rctx","alphaDiscardMode","cullAboveGround","bindPass","program","camera","projectionMatrix","setUniform2fv","nearFar","inverseViewport","setUniform1f","layerOpacity","setUniform4fv","externalColor","setUniform1i","lighting","setUniforms","shadowMap","bind","ssaoHelper","bindDraw","viewInverseTransposeMatrix","origin","viewMatrix","rebindTextures","slicePlane","setPipeline","blending","culling","depthTest","func","depthWrite","writeDepth","colorWrite","stencilWrite","sceneHasOcludees","stencilTest","polygonOffset","enableOffset","initializePipeline","_occludeePipelineState","getPipelineState","super","arguments","prototype","supportsEdges","techniqueConfig","vertexBufferLayout","vec3f","vec4f","vec2f","vec4u8","instanceBufferLayout","isVisibleInPass","isVisible","vvColorEnabled","getTechniqueConfig","vvSizeEnabled","shadowMappingEnabled","ssaoEnabled","offsetTransparentBackfaces","relativeElevation","intersect","D","eye","z","inverseRotation","requiresSlot","createGLMaterial","createBufferWriter","updateParameters","_material","updateTexture","ensureTechnique","_updateShadowState","setParameters","_updateOccludeeState","hasOccludees","beginSlot","_output","bindTextures","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvSizeValue","vvColorValues","vvColorColors","vvSymbolAnchor","vvSymbolRotationMatrix","allocate","createBuffer","write","transformation","invTranspTransformation","mat3f","mat4f"],"sourceRoot":""}