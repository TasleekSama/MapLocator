{"version":3,"file":"chunks/6857.js","mappings":"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","sources":["webpack://momraGisCore/./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js","webpack://momraGisCore/./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import s from\"../../../Graphic.js\";import i from\"../../../core/Collection.js\";import{isSome as t,isNone as r}from\"../../../core/maybe.js\";import{init as a,on as o}from\"../../../core/watchUtils.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView2DMixin as c}from\"./LayerView2D.js\";import p from\"./graphics/GraphicContainer.js\";import n from\"./graphics/GraphicsView2D.js\";import l from\"../../layers/LayerView.js\";const u=\"sublayers\",d=\"layerView\",f=Object.freeze({remove(){},pause(){},resume(){}});let g=class extends(c(l)){async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(s=>s.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){t(this._graphicsViewsFeatureCollectionMap)?yield*this._graphicsViewsFeatureCollectionMap.keys():t(this._graphicsViews)?yield*this._graphicsViews:yield*[]}async hitTest(e,s){const i=Array.from(this.graphicsViews(),(async s=>{const i=await s.hitTest(e);if(t(this._graphicsViewsFeatureCollectionMap)){const e=this._graphicsViewsFeatureCollectionMap.get(s);for(const s of i)!s.popupTemplate&&e.popupTemplate&&(s.popupTemplate=e.popupTemplate)}return i}));return(await Promise.all(i)).flat()}highlight(e){let t;if(\"number\"==typeof e?t=[e]:e instanceof s?t=[e.uid]:Array.isArray(e)&&e.length>0?t=\"number\"==typeof e[0]?e:e.map((e=>e&&e.uid)):i.isCollection(e)&&(t=e.map((e=>e&&e.uid)).toArray()),t=t.filter((e=>null!=e)),!t.length)return f;for(const s of this.graphicsViews())s.addHighlight(t);return{remove:()=>{for(const e of this.graphicsViews())e.removeHighlight(t)}}}update(e){for(const s of this.graphicsViews())s.processUpdate(e)}attach(){const e=this.view,s=()=>this.requestUpdate(),i=this.layer.featureCollections;if(t(i)&&i.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of i){const i=new p(this.view.featuresTilingScheme);i.fadeTransitionEnabled=!0;const r=new n({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:s,container:i});this._graphicsViewsFeatureCollectionMap.set(r,t),this.container.addChild(r.container),this.handles.add([a(t,\"visible\",(e=>r.container.visible=e)),a(r,\"updating\",(()=>this.notifyChange(\"updating\")))],d)}}else t(this.layer.sublayers)&&this.handles.add(o(this.layer,\"sublayers\",\"change\",(()=>this._createGraphicsViews()),(()=>this._createGraphicsViews()),(()=>this._destroyGraphicsViews())),u)}detach(){this._destroyGraphicsViews(),this.handles.remove(u)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.handles.remove(d);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),r(this.layer.sublayers))return;const e=[],s=this.view,i=()=>this.requestUpdate();for(const t of this.layer.sublayers){const r=new p(this.view.featuresTilingScheme);r.fadeTransitionEnabled=!0;const o=new n({view:s,graphics:t.graphics,requestUpdateCallback:i,container:r});this.handles.add([t.on(\"graphic-update\",o.graphicUpdateHandler),a(t,\"visible\",(e=>o.container.visible=e)),a(o,\"updating\",(()=>this.notifyChange(\"updating\")))],d),this.container.addChild(o.container),e.push(o)}this._graphicsViews=e}};g=e([h(\"esri.views.2d.layers.MapNotesLayerView2D\")],g);const m=g;export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.22/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e}from\"../../engine/webgl/enums.js\";import r from\"./BaseGraphicContainer.js\";class i extends r{renderChildren(r){this.attributeView.bindTextures(r.context,!1),this.children.some((e=>e.hasData))&&(super.renderChildren(r),r.drawPhase===e.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===e.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}export{i as default};\n"],"names":["u","d","f","Object","freeze","remove","pause","resume","g","async","e","Array","from","this","graphicsViews","s","hitTest","filter","popupTemplate","flat","_graphicsViewsFeatureCollectionMap","keys","_graphicsViews","i","get","Promise","all","highlight","t","uid","isArray","length","map","toArray","addHighlight","removeHighlight","update","processUpdate","attach","view","requestUpdate","layer","featureCollections","Map","featuresTilingScheme","fadeTransitionEnabled","r","graphics","source","renderer","requestUpdateCallback","container","set","addChild","handles","add","visible","notifyChange","sublayers","_createGraphicsViews","_destroyGraphicsViews","detach","moveStart","moveEnd","viewChange","isUpdating","updating","removeAllChildren","destroy","o","on","graphicUpdateHandler","push","m","renderChildren","attributeView","bindTextures","context","children","some","hasData","super","drawPhase","_renderChildren","hasHighlight","_renderHighlight","_boundsRenderer","doRender","painter","effects","bind","defines","draw","unbind"],"sourceRoot":""}